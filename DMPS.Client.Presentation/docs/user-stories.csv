story_id,epic,title,user_role,description,priority,story_points,dependencies,acceptance_criteria_1,acceptance_criteria_2,acceptance_criteria_3,technical_tasks,definition_of_done
"US-001","Core Architecture & Foundational Setup","Establish Core Solution Structure and DI Framework","Development Team","As a Developer, I need the multi-project solution structure and dependency injection framework established so that we have a clean, maintainable, and scalable foundation for building all subsequent features.","Must Have",5,"","Given the solution is opened in Visual Studio, When the solution is built, Then it compiles successfully without errors.","Given the solution structure is in place, When inspecting the projects, Then Client, Service, Core, DataAccess, and Infrastructure projects exist with correct inter-dependencies.","Given both the Client and Service applications are configured, When the application starts, Then the `Microsoft.Extensions.DependencyInjection` container is initialized and can resolve a sample registered service.","WI-001, WI-002","Solution builds successfully. DI container is functional in both the client and service applications. Projects have correct inter-dependencies. Code has been reviewed."
"US-002","Core Architecture & Foundational Setup","Implement Secure Application Logging","Administrator","As an Administrator, I want all significant application events logged to both a local file and the Windows Event Log, with all Protected Health Information (PHI) masked, so that I can securely troubleshoot issues and perform security audits.","Must Have",8,"US-001","Given the application is running, When an error or significant event occurs, Then a log entry is written to a rolling text file in the application's data folder.","Given the application is running, When an error or significant event occurs, Then a corresponding log entry is written to the Windows Event Log under a custom application source.","Given a log message contains PHI (e.g., Patient Name or Patient ID), When the log is written to any destination, Then the PHI is masked to prevent sensitive data exposure.","WI-003","Logs are written to both a rolling file and the Windows Event Log. PHI masking is verified in all log outputs. Serilog is integrated via the DI container. Code reviewed."
"US-003","Core Architecture & Foundational Setup","Establish Asynchronous Task Processing Framework","Development Team","As a Developer, I need a robust asynchronous task processing framework using RabbitMQ so that long-running operations initiated by the user do not freeze the client UI and can be processed reliably by the background service.","Must Have",8,"US-001, US-002","Given the client application needs to perform a long-running task, When it publishes a command message to a RabbitMQ queue, Then the message is marked as persistent and the queue is declared as durable.","Given the background service is running, When a message appears in its processing queue, Then the service consumes and processes the message.","Given the RabbitMQ broker restarts, When it comes back online, Then any unprocessed messages in durable queues are preserved and are not lost.","WI-004","Client can publish a persistent message to a durable RabbitMQ queue. Service can consume the message. A message survives a broker restart. A Dead-Letter Queue (DLQ) mechanism is configured and tested. Code reviewed."
"US-004","Core Architecture & Foundational Setup","Implement Synchronous IPC for Service Status Checks","User","As a User, I want the application to instantly know if a required background service is running before I try to perform an action like printing, so that I get immediate feedback and don't submit tasks that are destined to fail.","Should Have",5,"US-001","Given the background ""DICOM Service"" is running, When the client application starts or checks the service status, Then it receives a success response (e.g., 'PONG') via a Named Pipe.","Given the background ""DICOM Service"" is not running, When the client application checks the service status, Then it handles the timeout or connection failure gracefully and receives a 'service unavailable' status.","Given the service status is 'unavailable', When I view the UI, Then related action buttons like 'Print' are disabled.","WI-005","Client can successfully query the service status via Named Pipes. The UI (e.g., Print button) correctly reflects the service's availability by being enabled or disabled. Connection failures are handled without crashing the client. Code reviewed."
"US-005","User & Session Management","User Login with Secure Credentials","Registered System User","As a Registered System User, I want to securely log in to the application using my username and password so that I can gain access to the system and its features.","Must Have",8,"US-001","Given I have a valid and active user account, When I enter my correct username and password and click 'Login', Then I am granted access and the main application window is displayed.","Given I am on the login screen, When I enter a valid username but an incorrect password, Then I am shown a generic error message ""Invalid username or password"" and I remain on the login screen.","Given I have an account that has been disabled by an administrator, When I enter my correct credentials, Then I am shown an error message ""Your account has been disabled. Please contact an administrator."" and login is denied.","WI-006, WI-007, WI-011","User can log in successfully. Invalid/disabled login attempts are rejected with appropriate feedback. Passwords are confirmed to be stored and verified using BCrypt. The login UI meets design standards."
"US-006","User & Session Management","Enforce Role-Based Feature Access","System User (Technician/Admin)","As a System User, I want the application's features and UI controls to be enabled or disabled based on my assigned role so that I only see and can perform actions I am authorized for.","Must Have",8,"US-005","Given I am logged in as a 'Technician', When I navigate the application, Then the 'Administration' area and the 'Edit DICOM Metadata' button must be hidden or disabled.","Given I am logged in as an 'Administrator', When I navigate the application, Then all features, including the 'Administration' area and 'Edit DICOM Metadata' button, must be visible and enabled.","Given I am logged in as a 'Technician', When I attempt to programmatically access an admin-only function, Then the request is denied by the system's business logic and a security event is logged.","WI-008","Technician and Admin roles have correct UI and feature permissions verified. Backend authorization checks are implemented to prevent bypass. The UI dynamically adapts to the user's role upon login."
"US-007","User & Session Management","Configure System-Wide Password Policy","Administrator","As an Administrator, I want to configure the system-wide password policy (length, complexity, history, expiration) so that I can enforce security standards for all user accounts in compliance with our organization's policies.","Must Have",8,"US-005, US-022","Given I am an Admin in the 'Administration' settings, When I navigate to the password policy section, Then I can view and modify the minimum length, complexity requirements, expiration period, and reuse history.","Given I have configured a password policy, When any user (or an admin) attempts to set a new password, Then the system rejects any password that does not meet all the configured criteria with a specific error message.","Given a password's age exceeds the configured expiration period, When the user logs in, Then they are forced to change their password before they can access the application.","WI-009","Admin can view and update password policy settings. Password changes are validated against the configured policy. Password expiration is enforced at login. Code reviewed."
"US-008","User & Session Management","Create New User Account","Administrator","As an Administrator, I want to create a new user account with a username, role, and a system-generated temporary password so that I can provision access for new staff.","Must Have",5,"US-006","Given I am an Admin in the 'User Management' screen, When I click 'Add User', enter a unique username, select a role, and confirm, Then a new user account is created and a success notification is displayed containing the temporary password.","Given a new user account is created, When inspecting the user's record in the database, Then the account is flagged to require a password change on next login.","Given I am an Admin, When I attempt to create a user with a username that already exists, Then the system prevents the creation and displays an error message 'Username already exists'.","WI-010","Admin can create a user for each role. A secure temporary password is generated and displayed. The 'force password change' flag is set in the database. Duplicate username creation is prevented."
"US-009","User & Session Management","Edit and Disable User Accounts","Administrator","As an Administrator, I want to edit an existing user's details, such as their role or account status (enabled/disabled), so that I can manage user permissions and access as job responsibilities change.","Must Have",5,"US-008","Given I am an Admin in the 'User Management' screen, When I select a user and change their role from 'Technician' to 'Administrator' and save, Then the user's permissions are updated accordingly for their next session.","Given I am an Admin, When I edit a user's account and set their status to 'Disabled', Then that user is immediately unable to log in to the system.","Given I am an Admin, When I attempt to change the role of the last remaining Administrator account, Then the system prevents the action and displays an error message to avoid lockout.","WI-010","Admin can change a user's role and status. A disabled user is blocked from logging in. The system prevents the demotion/disabling of the last admin. All changes are recorded in the audit trail."
"US-010","User & Session Management","Delete User Account","Administrator","As an Administrator, I want to permanently delete a user's account so that I can revoke access for personnel who have left the organization.","Must Have",3,"US-008","Given I am an Admin in the 'User Management' screen, When I select a user and click 'Delete' and confirm the action, Then the user's account is permanently removed from the system.","Given I am an Admin, When I view the user list, Then the 'Delete' option for my own account and for the last remaining Administrator account is disabled.","Given a user account has been deleted, When I view the audit trail, Then a log entry exists recording who deleted the account and when.","WI-010","Admin can delete a user account. System prevents self-deletion and deletion of the last admin. Deletion is recorded in the audit trail."
"US-011","User & Session Management","Reset User Password","Administrator","As an Administrator, I want to reset a user's password so that I can restore access for a user who has forgotten their credentials.","Must Have",5,"US-012","Given I am an Admin in the 'User Management' screen, When I select a user and choose the 'Reset Password' action, Then the system generates a new secure temporary password and displays it to me.","Given a user's password has been reset, When I inspect their account in the database, Then their account is flagged to force a password change on their next login.","Given the password reset action is completed, When I view the audit trail, Then an entry is created logging that I performed a password reset for that user.","WI-012","Admin can trigger a password reset for any user except themselves. A new temporary password is generated and displayed. The user's account is flagged for a forced password change. The action is audited."
"US-012","User & Session Management","Forced Password Change on First Login","System User","As a System User, I want to be forced to change my temporary password upon my first login so that my account is secured with a password that only I know.","Must Have",5,"US-011","Given my password has been reset by an admin and I have a temporary password, When I successfully log in, Then I am immediately taken to a non-dismissible 'Change Password' screen.","Given I am on the 'Change Password' screen, When I enter a new password that meets the system's policy, Then my password is updated, and I am granted access to the main application.","Given I am on the 'Change Password' screen, When I attempt to navigate away or close the screen, Then I am prevented from doing so and must complete the password change to proceed.","WI-012","Logging in with a temporary password correctly redirects to the forced change screen. The user cannot bypass this screen. After a successful password change, the user can access the application, and the temporary password is no longer valid."
"US-013","User & Session Management","Automatic Session Lock on Inactivity","System User","As a System User, I want the application to automatically lock itself after 15 minutes of inactivity so that sensitive patient information is protected if I walk away from my workstation.","Must Have",8,"US-005","Given I am logged into the application, When I do not interact with the application (no mouse or keyboard input) for 15 minutes, Then a lock screen overlay appears, covering the entire application.","Given my session is locked, When I view the screen, Then my current work (e.g., an open study) is preserved in the background, but is inaccessible.","Given I am actively using the application, When I move the mouse or press a key, Then the 15-minute inactivity timer is reset.","WI-013","Application reliably locks after 15 minutes of inactivity. The inactivity timer is correctly reset by user input. The application state is preserved behind the lock screen."
"US-014","User & Session Management","Unlock Session with Password","System User","As a System User whose session is locked, I want to re-enter my password to unlock the application so that I can quickly and securely resume my work.","Must Have",3,"US-013","Given my application session is locked, When I enter my correct password into the lock screen and click 'Unlock', Then the lock screen disappears, and I can immediately resume interacting with the application from where I left off.","Given my application session is locked, When I enter an incorrect password, Then an error message is displayed, and the session remains locked.","Given my session is locked after 5 consecutive failed unlock attempts, When I make the 5th incorrect attempt, Then my session is terminated, and I am returned to the main login screen.","WI-013","Entering the correct password unlocks the session and restores the previous state. An incorrect password displays an error and does not unlock. Five failed attempts logs the user out."
"US-015","DICOM Core Functionality","Receive and Store DICOM Studies from Modalities","System","As a System, I want to function as a DICOM C-STORE SCP, automatically receiving studies from medical imaging modalities and reliably persisting them to storage so that data can be seamlessly imported from across the network.","Must Have",13,"US-003, US-017","Given the service is configured to listen on a specific port, When a DICOM modality sends a study via C-STORE, Then the service accepts the association and receives all DICOM files.","Given a study has been received, When the C-STORE operation completes, Then the study's metadata is published to a RabbitMQ queue for decoupled database ingestion.","Given the database ingestion consumer is running, When it processes a metadata message, Then it writes the Patient, Study, Series, and Image records to the PostgreSQL database and moves the files to their permanent, structured storage location.","WI-014, WI-015","System can successfully receive a study from a test SCU (e.g., using DCMTK). The reception is decoupled from DB writes via RabbitMQ. Metadata is correctly persisted to the database and files are moved to the correct hierarchical folder."
"US-016","DICOM Core Functionality","Query and Retrieve Studies from a Remote PACS","Technician/Admin","As a Technician or Admin, I want to query a remote PACS for studies and retrieve them to my local system so that I can view or work with prior imaging.","Must Have",13,"US-015","Given I have configured a remote PACS connection, When I enter search criteria (e.g., Patient ID, Study Date) and execute a search, Then the system performs a DICOM C-FIND query and displays the matching results from the PACS.","Given a list of search results from a PACS is displayed, When I select one or more studies and click 'Retrieve', Then the system initiates a DICOM C-MOVE request to the PACS.","Given a C-MOVE is in progress, When the local system receives the studies via C-STORE, Then the UI provides real-time feedback on the retrieval status (e.g., progress, completion, or failure).","WI-016","User can configure a PACS, perform a C-FIND, and view results. User can initiate a C-MOVE. The local SCP receives the files and the UI shows the status of the operation."
"US-017","DICOM Core Functionality","View DICOM Images with High Performance","Technician/Admin","As a Technician or Admin, I want to open and view DICOM images in a high-performance, GPU-accelerated viewer so that I can conduct diagnostic reads efficiently, even with large multi-frame series.","Must Have",21,"","Given I select a DICOM series to view, When the viewer opens, Then it renders both monochrome and color images correctly.","Given I open a large multi-frame series (e.g., CT), When I scroll through the images, Then the viewer provides a smooth, responsive experience without stuttering.","Given a large study is loading, When the viewer first appears, Then a low-resolution preview is displayed almost instantly, which is then replaced by the full-resolution data as it loads in the background.","WI-017, WI-019","Viewer can render various DICOM image types. User can scroll through multi-frame series smoothly. Viewer uses progressive loading and DirectX acceleration. Viewer supports side-by-side comparison with synchronized controls."
"US-018","DICOM Core Functionality","Manipulate Image Views with Standard Tools","Technician/Admin","As a Technician or Admin, I want to use a standard set of image manipulation tools (Zoom, Pan, Window/Level, Rotate) so that I can adjust the image presentation to optimize my review.","Must Have",8,"US-017","Given an image is open in the viewer, When I use the zoom tool, Then I can magnify the image from 10% to 800%.","Given an image is open, When I use the Window/Level tool, Then I can interactively adjust the brightness and contrast with my mouse and select from common presets (e.g., Lung, Bone).","Given an image is open, When I use the rotate and flip tools, Then I can reorient the image in 90-degree increments or flip it horizontally/vertically.","WI-017","Zoom, Pan, Window/Level (interactive and presets), Rotate, and Flip tools are all functional and responsive in the DICOM viewer."
"US-019","DICOM Core Functionality","Import Local DICOM Studies with Duplicate Handling","Technician/Admin","As a Technician or Admin, I want to import DICOM studies from my computer or a network share by dragging and dropping them into the application so that I can easily work with data from external media like CDs.","Must Have",8,"US-015","Given I have DICOM files in a folder in Windows Explorer, When I drag the files or folder onto the application window, Then the import process is initiated.","Given an imported study's UID already exists in the system, When the import is processed, Then I am presented with a dialog to choose whether to 'Overwrite' the existing study, 'Discard' the new one, or 'Save as New' with a new UID.","Given the import process completes, When some files fail validation, Then I am shown a summary report detailing which files were rejected and why.","WI-018","User can successfully import DICOM studies via drag-and-drop. The duplicate study resolution workflow is functional. DICOM file validation is performed, and a summary report is provided."
"US-020","DICOM Core Functionality","Export Images to Common Formats","Technician/Admin","As a Technician or Admin, I want to export selected DICOM images or series to common formats like JPEG or PNG so that I can use them in presentations or other documents.","Should Have",3,"US-017","Given I have a study open, When I select one or more images and choose the 'Export' option, Then I am prompted to select a format (JPEG/PNG) and an output location.","Given I have configured the export options, When the export completes, Then the selected images are saved as new files in the chosen format and location.","Given I am exporting, When I choose the output options, Then I can configure the output resolution of the resulting image files.","WI-018","User can select images and export them as JPEG or PNG files. The output resolution can be configured. The exported files are viewable and correct."
"US-021","DICOM Core Functionality","Create and Save Non-Destructive Annotations","Technician/Admin","As a Technician or Admin, I want to create and save non-destructive annotations and measurements on images so that I can mark findings and communicate them to others without altering the original image data.","Must Have",13,"US-018","Given an image is open in the viewer, When I use the annotation tools, Then I can draw arrows, add text boxes, and measure length, angle, and area.","Given I have created annotations on an image, When I click 'Save Annotations', Then the system creates a new DICOM Grayscale Softcopy Presentation State (GSPS) object and saves it alongside the original series.","Given a series with saved annotations (a GSPS object) is opened, When the image is displayed, Then the previously saved annotations are automatically loaded and displayed on the image.","WI-035","User can create all specified annotation and measurement types. Saving annotations creates a valid GSPS file and does not modify original images. Re-opening the study correctly loads and displays the saved annotations."
"US-022","Security & Compliance","View and Export System Audit Trail","Administrator","As an Administrator, I want to view a comprehensive audit trail of all significant system events so that I can investigate security incidents and ensure compliance.","Must Have",8,"US-001","Given I am an Admin, When I navigate to the 'Audit Trail' viewer in the Administration area, Then I can see a chronological log of all auditable events (e.g., user login, data modification, user creation).","Given I am viewing the audit trail, When I use the filter controls, Then I can filter the log entries by user and by a specific date range.","Given I have filtered the audit trail view, When I click the 'Export to CSV' button, Then the system generates and saves a CSV file containing only the currently displayed log entries.","WI-020","The audit trail UI is accessible only to Admins. All specified events are logged with correct details. Filtering by user and date range works correctly. The CSV export function works and matches the filtered view."
"US-023","Security & Compliance","Edit DICOM Metadata Securely","Administrator","As an Administrator, I want to edit DICOM metadata for a study without altering the original files so that I can correct data entry errors while maintaining a clear, auditable history of the original data.","Must Have",13,"US-022, US-017","Given I am an Admin viewing a study, When I initiate a metadata edit, Then the system creates a 'working copy' of the study files, leaving the original files untouched.","Given I have made changes to the metadata in the working copy, When I save the changes, Then the modifications are saved to the working copy files, and every individual tag change is recorded in the audit trail with its old and new value.","Given a study with an unsaved working copy exists, When I close and later re-open that study, Then the application prompts me to either 'Continue with unsaved changes' or 'Discard changes'.","WI-021","Editing metadata creates a working copy and does not alter original files. All edits are logged to the audit trail with before/after values. The system correctly handles and prompts for persisted unsaved working copies."
"US-024","Security & Compliance","Perform Automated Data Integrity Checks","System","As a System, I want to perform periodic, scheduled background checks to verify that all DICOM files referenced in the database exist in the file system so that data corruption or accidental file deletion can be detected and reported to an Administrator.","Should Have",5,"US-015","Given the system has been running, When the scheduled integrity check task executes, Then it iterates through all image records in the database and verifies the existence of the corresponding file at its expected path.","Given the integrity check finds a database record pointing to a non-existent file, When the check completes, Then a high-priority error is logged to the system log detailing the discrepancy.","Given the system is running, When an Admin views the system health report, Then a summary of the latest integrity check results, including any found discrepancies, is available.","WI-022","A scheduled background task runs periodically to check file integrity. Discrepancies between the database and file system are correctly identified and logged. The results are available for an Admin to review."
"US-025","Security & Compliance","Secure Data At-Rest and In-Transit","Security Officer","As a Security Officer, I want to ensure all sensitive data is securely stored and transmitted, including encrypted database columns for PHI, encrypted database connections, and secure storage for application secrets, so that the system is compliant with HIPAA security rules.","Must Have",13,"US-017, US-005","Given the application is configured, When data containing PHI is written to the PostgreSQL database, Then it is encrypted at the column level using the `pgcrypto` extension.","Given the application connects to the database or the Odoo licensing API, When the connection is established, Then it must use an encrypted TLS channel.","Given the application needs to store secrets like database passwords or API keys, When the configuration is deployed, Then these secrets are stored securely in the Windows Credential Manager, not in plaintext configuration files.","WI-023, WI-024","PHI in the database is verified to be encrypted. Network traffic analysis confirms connections are TLS-encrypted. No secrets are found in `appsettings.json` or other config files; the app pulls them from Windows Credential Manager."
"US-026","Security & Compliance","Create Anonymized Copies of DICOM Studies","Researcher/Admin","As a Researcher or Administrator, I want to create a de-identified copy of a DICOM study so that I can use the data for research or training purposes without exposing Protected Health Information.","Should Have",8,"US-017","Given I have selected a study, When I use the anonymization feature, Then I can choose from predefined profiles (e.g., 'HIPAA Safe Harbor') or manually select tags to remove/modify.","Given the anonymization process completes, When I check the storage location, Then a new study with a new UID is created, containing the modified DICOM files, while the original study remains completely unchanged.","Given I need to anonymize visible information in the image, When I use the pixel anonymization tool, Then I can permanently burn blackout shapes into the image data of a new copy of the series.","WI-025","User can create an anonymized copy of a study using profiles. The process is non-destructive to the original data. Pixel-level anonymization correctly creates a new series with modified image data."
"US-027","Printing & Reporting","Print DICOM Images Asynchronously","Technician/Admin","As a Technician or Admin, I want to submit a print job and have it processed in the background so that the application UI remains responsive and I can continue with other tasks while the printing occurs.","Must Have",8,"US-003, US-004","Given I am in the print preview screen and click 'Print', When the 'DICOM Service' is running, Then a print job is serialized and sent to a RabbitMQ queue for background processing.","Given I have submitted a print job, When the job is being processed, Then my client application UI is not frozen and I can continue to navigate and use the application.","Given I attempt to print, When the 'DICOM Service' is not running (verified via Named Pipe), Then the 'Print' button is disabled and a notification informs me the print service is unavailable.","WI-026, WI-027","Submitting a print job sends a message to RabbitMQ and does not block the UI. The background service consumes the message and spools a job to the Windows printer. The Print button's state correctly reflects the service's availability."
"US-028","Printing & Reporting","View and Manage the Print Queue","Technician/Admin","As a Technician or Admin, I want to view a print queue that shows the status of all submitted jobs so that I can track my prints and manage the queue.","Should Have",8,"US-027","Given I have submitted one or more print jobs, When I open the 'Print Queue' view, Then I can see a list of my jobs with their current status (e.g., Queued, Processing, Completed, Failed).","Given I am a standard user viewing the queue, When I select one of my own jobs that is in the 'Queued' state, Then I have an option to cancel it.","Given I am an Administrator viewing the queue, When I view the list, Then I can see all users' jobs and have options to cancel any job or re-prioritize queued jobs.","WI-028","The Print Queue UI displays jobs and their real-time statuses. Standard users can cancel their own queued jobs. Admins can view and manage all jobs in the queue. Failed jobs display a reason and have a retry option."
"US-029","Printing & Reporting","Configure Print Layouts and Presets","Technician/Admin","As a Technician or Admin, I want to configure the page layout with various templates and options in a print preview screen so that I can control the final appearance of the printed output.","Must Have",13,"US-017","Given I am in the print preview interface, When I select a layout template, Then I can choose from options like '2x2 grid on A4' and modality-specific presets like '4x4 for CT'.","Given I am in the print preview, When I interact with the page settings, Then I can configure page margins, orientation (Portrait/Landscape), and image scaling (Fit-to-Page/Actual Size).","Given I am arranging images for printing, When I interact with the layout grid, Then I can manually drag and drop images to change their order and position.","WI-029","The print preview UI provides a selection of predefined layout templates. Users can configure margins, orientation, and scaling. Drag-and-drop rearrangement of images within the layout is functional."
"US-030","Printing & Reporting","Add Custom Branding and Text Overlays to Prints","Technician/Admin","As a Technician or Admin, I want to add branding (logos) and custom text overlays with dynamic information to my printouts so that the output is professional and contains relevant metadata.","Should Have",8,"US-029","Given I am configuring the print layout, When I use the branding options, Then I can upload a custom logo (PNG/JPEG) and configure its position and size on the page.","Given I am configuring overlays, When I add a custom text field, Then I can configure its font, size, and color.","Given I have added a text field with a dynamic variable (e.g., `[PatientID]`), When the final document is printed, Then the variable is replaced with the correct DICOM metadata from the study.","WI-030","User can upload and position a logo on the print layout. User can add and style custom text fields. Dynamic variables in text fields are correctly populated from DICOM metadata at print time."
"US-031","Printing & Reporting","Apply Non-Destructive De-identification Masks to Prints","Technician/Admin","As a Technician or Admin, I want to apply blackout masks to printed images in a non-destructive way so that I can de-identify PHI for specific use cases without altering the original DICOM files.","Should Have",8,"US-029, US-009","Given I am in the print preview, When I use the de-identification feature, Then I can apply pre-built or custom blackout overlays (masks) to the images.","Given I am an Administrator, When I navigate to the settings page, Then I can access an overlay template manager to create, edit, and delete reusable rectangular and polygonal overlay templates.","Given I have applied a mask in the print preview, When the job is printed, Then the mask is applied to the final output, but the original DICOM file on disk remains unmodified.","WI-031","Users can apply blackout masks in the print preview. Admins can manage a library of reusable overlay templates. The masking process is confirmed to be non-destructive to the source DICOM data."
"US-032","Printing & Reporting","Export Print Layout as a Secure PDF","Technician/Admin","As a Technician or Admin, I want to export the final print layout as a password-protected, standards-compliant PDF file so that I have a portable digital version of the output.","Should Have",8,"US-029, US-003","Given I have finalized a layout in the print preview, When I choose the 'Export to PDF' option, Then the system generates a PDF file that is compliant with the PDF/A-3 standard.","Given I am exporting to PDF, When the export options are presented, Then I have the ability to encrypt the PDF with a user-provided password using AES-256 encryption.","Given the PDF export is a potentially long-running task, When I initiate the export, Then the job is processed asynchronously by the background service, and I receive a notification upon completion.","WI-032","The system can generate a PDF/A-3 compliant file from the print preview. The PDF export can be password-protected with AES-256 encryption. The generation is handled by the background service to keep the UI responsive."
"US-033","Printing & Reporting","Send Print Output via Email","Technician/Admin","As a Technician or Admin, I want to send the print output via email directly from the application so that I can efficiently share it with collaborators.","Could Have",8,"US-032","Given I am an Administrator, When I go to the system settings, Then I can configure the SMTP server settings required for sending email.","Given I have a prepared print layout, When I choose the 'Send Email' option, Then I can compose an email and attach the output as either a single PDF or as individual image files (JPEG/PNG).","Given I am composing an email that contains PHI variables or unsecured attachments, When I click 'Send', Then the system displays a prominent warning about sending unsecured PHI and requires my explicit confirmation to proceed.","WI-033","Admin can configure SMTP settings. User can send email with attachments in specified formats. A security warning for sending unsecured PHI is implemented and requires user confirmation."
"US-034","Deployment & Operations","Install the Application and Services","System Administrator","As a System Administrator, I want to use a single, signed MSIX installer to deploy the application so that the installation process is simple, secure, and reliable.","Must Have",8,"US-001","Given I run the MSIX installer, When the installation process begins, Then it performs a prerequisite check and will not complete if it cannot connect to the required PostgreSQL and RabbitMQ services.","Given the installation completes successfully, When I check the Windows Services console, Then a service named ""DICOM Service"" has been installed and is running.","Given the installer is executed, When prompted by Windows, Then it shows a valid signature from a trusted publisher, confirming it has not been tampered with.","WI-034","The MSIX installer successfully deploys the client and the background service. The prerequisite check for DB/MQ connectivity works correctly. The installed Windows Service is correctly named and started."
"US-035","Deployment & Operations","Migrate Data from Legacy System","System Administrator","As a System Administrator, I want to use a standalone utility to migrate data from our legacy system into the new application so that we can transition with no loss of historical data.","Should Have",13,"US-015, US-017","Given I run the data migration utility, When I provide connection details for the legacy and new systems, Then the utility extracts study metadata and DICOM files from the source.","Given the migration process is running, When it completes, Then it generates a detailed log of all actions and a final validation report comparing record counts between the source and destination to verify integrity.","Given the data has been migrated, When I open the new application, Then I can search for and view the migrated studies and their corresponding images.","WI-036","The migration utility successfully transfers data and files. A detailed log and validation report are generated. Migrated data is accessible and correct in the new application."
"US-036","Deployment & Operations","Monitor System Health","Administrator","As an Administrator, I want to view a System Health Dashboard so that I can get a real-time overview of the status of all critical components and be alerted to potential issues.","Should Have",8,"US-001, US-033","Given I am an Admin, When I open the 'System Health Dashboard', Then I see real-time status indicators for the Windows Service, PostgreSQL connectivity, and RabbitMQ connectivity.","Given I am viewing the dashboard, When there are messages in the processing queue or dead-letter queue, Then the dashboard displays the current count for each.","Given a critical metric crosses a configured threshold (e.g., disk space is low, DLQ count > 0), When the condition is detected, Then the system automatically sends an alert email to a pre-configured address.","WI-038","The dashboard displays the correct real-time status of all specified components. It accurately reports queue depths and disk space. The email alerting mechanism functions correctly when a threshold is breached."