test_id,feature_area,test_type,test_level,priority,automation_candidate,test_description,preconditions,test_steps,expected_result,test_data_needs,tools_required,estimated_effort,dependencies
UNIT-LOG-001,Logging,Functional,Unit,Critical,High,"Verify PHI Masking Enricher correctly redacts Patient Name","N/A","1. Create a log event with a message template like ""Processing study for patient {PatientName}"" and a property ""PatientName"" set to ""John Doe"". 2. Pass the log event to the PhiMaskingEnricher. 3. Render the message.","The rendered message must be ""Processing study for patient [REDACTED]"".","Sample log messages with and without PHI.","xUnit, Moq",1.5,TASK-006
UNIT-LOG-002,Logging,Functional,Unit,High,High,"Verify PHI Masking Enricher correctly redacts Patient ID in structured logs","N/A","1. Create a log event with a message template and a property ""PatientID"" set to ""PID12345"". 2. Pass the event to the PhiMaskingEnricher. 3. Check the properties of the enriched event.","The property ""PatientID"" in the log event must have its value changed to ""[REDACTED]"".","Sample log properties containing various PHI patterns.","xUnit, Moq",1.5,TASK-006
INT-LOG-001,Logging,Functional,Integration,High,High,"Verify logs are written to a rolling text file via Serilog sink configuration","The Serilog file sink is configured in the application host.","1. Start the application (either Client or Service). 2. Call `ILogger.LogInformation(""Test file log"")`. 3. Check the configured log file directory.","A new log file is created and it contains the message ""Test file log"".","N/A","xUnit, Test Host",2,TASK-005
INT-LOG-002,Logging,Functional,Integration,High,High,"Verify logs are written to the Windows Event Log","The Serilog Event Log sink is configured and the application is run with permissions to create an event source.","1. Run the application as an administrator once to register the event source. 2. Restart the application. 3. Call `ILogger.LogError(""Test event log"")`. 4. Open the Windows Event Viewer and navigate to the Application log.","A new error event from the application's source appears and contains the message ""Test event log"".","N/A","Windows Event Viewer",3,TASK-005
INT-LOG-003,Logging,Functional,Integration,Critical,High,"Verify Correlation ID is propagated through RabbitMQ and logged by the consumer","A producer and consumer are configured with Serilog and the correlation ID middleware.","1. In the client, generate a correlation ID. 2. Publish a message to RabbitMQ, adding the correlation ID to the message headers. 3. The service consumes the message, extracts the correlation ID, and sets it in its logging context. 4. The service logs a message. 5. Check the service's log output.","The log entry from the service must contain the same correlation ID that was generated by the client.","N/A","RabbitMQ, xUnit",4,TASK-052
UNIT-DI-001,Core Architecture,Functional,Unit,High,High,"Verify DI container correctly resolves registered services in WPF client","The DI container is configured in `App.xaml.cs`.","1. Register a mock service `IMyService` with its implementation in the DI container. 2. Resolve `IMyService` from the built service provider. 3. Assert that the resolved object is not null and is of the correct type.","The service is successfully resolved from the container.","Mock service and interface.","xUnit, Microsoft.Extensions.DependencyInjection",1,TASK-003
INT-IPC-001,Inter-Process Communication,Functional,Integration,Critical,High,"Verify Named Pipe client receives 'PONG' when service is running","The Windows Service with the Named Pipe server is running.","1. Start the WPF client application. 2. The client's Named Pipe service attempts to connect to the server. 3. The client sends a 'PING' message. 4. The client waits for a response.","The client successfully connects and receives a 'PONG' response from the service within the timeout period.","N/A","xUnit",3,TASK-013,TASK-014
INT-IPC-002,Inter-Process Communication,Functional,Integration,High,High,"Verify Named Pipe client handles connection failure when service is stopped","The Windows Service is stopped.","1. Start the WPF client application. 2. The client's Named Pipe service attempts to connect to the server.","The client fails to connect and gracefully handles the exception (e.g., TimeoutException), reporting the service as unavailable without crashing.","N/A","xUnit",2.5,TASK-013,TASK-014
INT-MQ-001,Asynchronous Processing,Non-Functional,Integration,Critical,High,"Verify message durability across RabbitMQ broker restart","RabbitMQ is running.","1. The test producer publishes a persistent message to a durable queue. 2. The test script stops the RabbitMQ broker/container. 3. The test script restarts the RabbitMQ broker/container. 4. A test consumer connects and attempts to receive from the queue.","The consumer successfully receives the original message, proving it was not lost during the restart.","A simple serializable message object.","Testcontainers, Docker, xUnit",5,TASK-012
INT-MQ-002,Asynchronous Processing,Functional,Integration,Critical,High,"Verify failed message is routed to the Dead-Letter Queue (DLQ)","A main queue is configured with a DLX/DLQ policy.","1. A test producer publishes a message to the main queue. 2. A test consumer receives the message but intentionally fails to process it. 3. The consumer sends a negative acknowledgement (`basic.nack`) with `requeue=false`. 4. Check the contents of the configured DLQ.","The original message is present in the DLQ. The main queue is empty.","A simple serializable message object.","RabbitMQ Management UI, xUnit",4,TASK-011
UNIT-AUTH-001,Authentication,Functional,Unit,Critical,High,"Verify PasswordPolicyService correctly validates a compliant password","The PasswordPolicyService is instantiated with mock settings (e.g., length=12, require all complexity).","1. Define a password that meets all policy requirements (e.g., ""ValidP@ssword123""). 2. Call `passwordPolicyService.ValidatePassword()` with the compliant password.","The method returns a success result with no validation errors.","A set of compliant and non-compliant passwords.","xUnit, Moq",1,TASK-025
UNIT-AUTH-002,Authentication,Functional,Unit,High,High,"Verify PasswordPolicyService rejects a password that reuses a previous hash","The PasswordPolicyService is instantiated with a mock user object that has a populated password history.","1. Create a mock user with a history of BCrypt password hashes. 2. Call `passwordPolicyService.ValidatePassword()` with a new password that, when hashed, matches one in the history.","The method returns a failure result with a specific error message ""Password has been used previously."".","Mock User object with hashed password history.","xUnit, Moq, BCrypt library",2,TASK-025
INT-AUTH-001,Authentication,Functional,Integration,Critical,High,"Verify AuthenticationService successfully logs in a valid, active user","A test database is seeded with an active user with a known password hashed with BCrypt.","1. Instantiate `AuthenticationService` with a connection to the test database. 2. Call `authenticationService.LoginAsync()` with the correct username and password.","The service returns a success result containing the user's session information (ID, role).","An active user account in the test database.","xUnit, EF Core (In-Memory or Testcontainers)",3.5,TASK-021
INT-AUTH-002,Authentication,Functional,Integration,Critical,High,"Verify AuthenticationService rejects a user with a correct password but a disabled account","A test database is seeded with a user whose `isActive` flag is false.","1. Instantiate `AuthenticationService` with a connection to the test database. 2. Call `authenticationService.LoginAsync()` with the correct credentials for the disabled user.","The service returns a failure result with a specific status indicating the account is disabled.","A disabled user account in the test database.","xUnit, EF Core (In-Memory or Testcontainers)",2.5,TASK-021
SYS-AUTH-001,Authentication,Functional,System,Critical,High,"End-to-end user login with valid credentials","A valid 'Technician' user exists in the database. The application is at the login screen.","1. Enter the Technician's username. 2. Enter the correct password. 3. Click the 'Login' button.","The login window closes, and the main application window appears. The 'Administration' tab is not visible, confirming the Technician role was applied.","An active 'Technician' user account.","Appium/WinAppDriver",4,US-005
SYS-AUTH-002,Authentication,Security,System,Critical,Manual Only,"Verify generic error message on invalid login","Application is at the login screen. A valid user 'jdoe' exists.","1. Enter username 'jdoe'. 2. Enter an incorrect password. 3. Click 'Login'. 4. Observe the error message. 5. Enter a non-existent username 'nobody'. 6. Enter any password. 7. Click 'Login'. 8. Observe the error message.","In both steps 4 and 8, the exact same, non-specific error message ""Invalid username or password"" is displayed.","An active user account.","N/A",1,US-005
SYS-AUTH-003,Session Management,Functional,System,Critical,Medium,"Verify automatic session lock after inactivity","User is logged in. Inactivity timeout is configured to a short interval (e.g., 10 seconds) for testing.","1. Log in to the application. 2. Perform no mouse or keyboard actions for 11 seconds. 3. Observe the screen.","The application is completely covered by a lock screen overlay, prompting for a password.","A valid user account.","Appium/WinAppDriver",3,US-013
SYS-AUTH-004,Session Management,Functional,System,Critical,Medium,"Verify session unlock with correct password restores state","The application is in a locked state with a study open in the viewer.","1. Enter the correct password for the locked session. 2. Click the 'Unlock' button.","The lock screen overlay disappears. The application is in the exact same state as before it was locked, with the study still open in the viewer.","A valid user account and a sample DICOM study.","Appium/WinAppDriver",3.5,US-014
SYS-AUTH-005,Session Management,Security,System,High,Medium,"Verify forced logout after 5 failed unlock attempts","The application is in a locked state.","1. Enter an incorrect password and click 'Unlock'. 2. Repeat step 1 four more times, for a total of 5 failed attempts.","After the 5th attempt, the main application window closes, and the user is returned to the initial login screen. A security event is logged in the audit trail.","A valid user account.","Appium/WinAppDriver, pgAdmin",4,US-014
SYS-AUTH-006,User Management,Functional,System,Critical,High,"Admin can create a new Technician user","An Administrator is logged in and on the User Management screen.","1. Click 'Add User'. 2. Enter a unique username. 3. Select the 'Technician' role. 4. Click 'Create'.","A success notification appears with a temporary password. The new user appears in the user list. The database shows the user created with `isTemporaryPassword=true`. An audit log entry is created for the event.","An admin user account.","Appium/WinAppDriver, pgAdmin",4.5,US-008
SYS-AUTH-007,User Management,Functional,System,Critical,High,"User is forced to change password after admin reset","A user account exists that has been reset by an admin (`isTemporaryPassword=true`).","1. The user logs in with their username and the correct temporary password. 2. The user is presented with the 'Change Password' screen. 3. The user enters a new, valid password and confirms it. 4. The user clicks 'Set Password'. 5. The user is redirected to the main application. 6. The user logs out. 7. The user attempts to log in with the new password.","The user is successfully forced to change their password and cannot bypass the screen. The new password works for subsequent logins. The temporary password is now invalid.","A user account flagged for password change.","Appium/WinAppDriver",6,US-012
SYS-AUTH-008,User Management,Security,System,High,Manual Only,"Admin cannot delete the last Administrator account","An Administrator is logged in, and they are the only user with the 'Admin' role in the system.","1. Go to User Management. 2. Attempt to delete the other Administrator account (if one exists). 3. Attempt to change the role of the last admin to 'Technician'. 4. Attempt to disable the last admin account.","In all cases, the action is prevented by the UI (disabled button) or a backend validation error message is displayed (e.g., ""Cannot delete the last administrator account."").","A test setup with only one or two admin accounts.","N/A",2,US-009,US-010
INT-DICOM-001,DICOM Ingestion,Functional,Integration,Critical,High,"Verify C-STORE SCP to RabbitMQ publishing","The Windows Service is running with the C-STORE SCP and RabbitMQ producer configured.","1. Use a DICOM SCU tool (like DCMTK's storescu) to send a DICOM file to the service's SCP. 2. Monitor the target RabbitMQ queue using the management UI.","The SCP accepts the file and saves it to a temp location. A new message appears in the RabbitMQ queue, and its payload contains the parsed metadata of the sent DICOM file.","A valid DICOM file.","DCMTK, RabbitMQ Management UI",5,TASK-049
INT-DICOM-002,DICOM Ingestion,Functional,Integration,Critical,High,"Verify DICOM ingestion consumer persists data to DB and moves file","The Windows Service is running with the ingestion consumer active. A message with valid DICOM metadata and a temp file path is in the queue.","1. Let the consumer process the message from INT-DICOM-001. 2. Query the PostgreSQL database for the Patient, Study, Series, and Image records corresponding to the DICOM file. 3. Check the configured permanent storage location.","The database contains the correct metadata records. The DICOM file has been moved from the temp location to the correct hierarchical folder structure (`.../[PatientID]/[StudyUID]/...`). The message is removed from the queue.","N/A","pgAdmin, File Explorer",4.5,TASK-051,TASK-052
SYS-DICOM-001,DICOM Query/Retrieve,Functional,System,Critical,Medium,"Query a remote PACS using C-FIND and display results","A remote PACS (or a simulator like Orthanc) is configured and running with test data. The client has the PACS configured.","1. Log in to the application. 2. Navigate to the PACS Query view. 3. Enter valid search criteria (e.g., Patient ID). 4. Click 'Search'.","The application performs a C-FIND query, and the UI grid populates with the study results returned from the PACS.","A configured PACS simulator with DICOM studies.","Orthanc (or other PACS), Appium/WinAppDriver",6,US-016
SYS-DICOM-002,DICOM Query/Retrieve,Functional,System,Critical,Medium,"Retrieve a study from a remote PACS using C-MOVE","The system is displaying C-FIND results as per SYS-DICOM-001.","1. Select a study from the results grid. 2. Click 'Retrieve'.","A C-MOVE request is sent. The UI shows progress feedback. The local C-STORE SCP receives the files for the study, and they are ingested into the local database and storage. The UI shows a 'Completed' status.","A configured PACS simulator with DICOM studies.","Orthanc (or other PACS), Appium/WinAppDriver",5,US-016
SYS-DICOM-003,DICOM Viewer,Performance,System,Critical,Manual Only,"Verify viewer performance with large multi-frame series","User is logged in.","1. Import or retrieve a large multi-frame DICOM series (>500 images, e.g., a CT or MR series). 2. Open the series in the viewer. 3. Rapidly scroll back and forth through all the frames. 4. Apply zoom and pan while scrolling.","The initial load shows a low-res preview in < 3 seconds. Scrolling is smooth (>30 FPS) with no noticeable stuttering. UI remains responsive to zoom/pan actions.","A large multi-frame CT or MR DICOM study.","Performance monitoring tools (e.g., Windows Performance Analyzer)",4,US-017
SYS-DICOM-004,DICOM Viewer,Functional,System,Critical,Manual Only,"Verify all viewer tools are functional","A study is open in the viewer.","1. Click and drag to test Pan. 2. Use mouse wheel to test Zoom. 3. Click and drag while holding a specific key/button to test Window/Level. 4. Select a WW/WL preset (e.g., 'Bone'). 5. Click the 'Rotate' and 'Flip' buttons.","Pan moves the image. Zoom magnifies the image. WW/WL interactively changes brightness/contrast. Presets apply correctly. Rotate and Flip buttons reorient the image as expected.","Any standard DICOM study.","N/A",2,US-018
SYS-DICOM-005,DICOM Import,Functional,System,High,Medium,"Verify drag-and-drop import with duplicate study handling","User is logged in. A study already exists in the local database.","1. Drag a folder containing DICOM files for the existing study onto the application window. 2. The duplicate resolution dialog appears. 3. Select the 'Save as New' option. 4. The import process completes.","The system correctly identifies the duplicate. After choosing 'Save as New', a new study with a new Study Instance UID is created in the database, containing the imported images. The original study remains untouched.","A DICOM study on the local file system that matches one in the DB.","Appium/WinAppDriver",5,US-019
INT-SEC-001,Data Security,Security,Integration,Critical,High,"Verify PHI columns in the database are encrypted","The pgcrypto extension is enabled, and EF Core is configured for encryption.","1. Create a new Patient entity with a `PatientName` property. 2. Save the entity to the database using the application's repository. 3. Use a direct SQL client (like pgAdmin) to query the `patients` table. 4. Select the `patient_name` column as raw `bytea`.","The application can write and read the Patient entity correctly. The raw value in the `patient_name` column in the database is unreadable binary data, not the plaintext name.","N/A","xUnit, EF Core, pgAdmin",4,TASK-086
SYS-SEC-001,Data Security,Functional,System,Critical,Medium,"Verify non-destructive metadata editing workflow","An Administrator is logged in and viewing a study.","1. Click 'Edit Metadata'. 2. Change a tag value (e.g., Patient's Birth Date). 3. Click 'Save'. 4. Check the original study's file hash. 5. Check the audit log. 6. Re-open the study.","A 'working copy' of the study is created. The original file hash is unchanged. The audit log contains an entry for the specific tag change with the old and new values. The new, edited value is displayed when the study is re-opened.","An admin account and a sample DICOM study.","File hashing utility, pgAdmin, Appium/WinAppDriver",6,US-023
SYS-SEC-002,Auditing,Functional,System,Critical,High,"Verify audit trail logs all required user management actions","An Administrator is logged in.","1. Create a new user. 2. Edit that user's role. 3. Reset that user's password. 4. Disable the user. 5. Delete the user. 6. Navigate to the Audit Trail viewer.","The audit trail contains a distinct, accurate log entry for each of the five actions performed, with the correct admin user, target user, and event type.","An admin user account.","Appium/WinAppDriver, pgAdmin",4.5,US-022
SYS-PRINT-001,Printing,Functional,System,Critical,High,"End-to-end asynchronous print job submission and processing","User is logged in, a printer is installed in Windows, and the background service is running.","1. Open a study. 2. Open the Print Preview. 3. Select a layout and add an image. 4. Click 'Print'. 5. Immediately navigate to another part of the application. 6. Check the Windows printer queue.","The print job is submitted without blocking the UI. A job appears in the application's Print Queue UI with status 'Queued', then 'Processing', then 'Completed'. A corresponding job appears in the Windows printer queue and prints successfully.","A valid user account, a DICOM study.","A virtual PDF printer (for automation)",8,US-027
SYS-PRINT-002,Printing,Functional,System,High,Medium,"Verify Print Queue UI reflects job status and allows cancellation","A print job has been submitted but the consumer is paused to keep the job in 'Queued' state.","1. Log in and navigate to the Print Queue UI. 2. Verify the job is listed with status 'Queued'. 3. Select the job and click 'Cancel'. 4. Verify the job status changes to 'Cancelled'. 5. Resume the consumer.","The UI correctly displays the job status. The user can cancel their own queued job. After cancellation, the consumer, when resumed, does not process the cancelled job.","N/A","Appium/WinAppDriver",4,US-028
SYS-PRINT-003,Printing,Functional,System,High,Medium,"Verify print preview layout and branding options","User is in the Print Preview screen.","1. Select a '2x2 grid on A4' layout. 2. Drag images into the cells. 3. Upload a logo and position it in the header. 4. Add a text overlay with the dynamic variable `[PatientName]`. 5. Export the result to PDF.","The preview canvas updates to show the 2x2 grid. Images can be rearranged. The exported PDF shows the correct layout, the logo appears in the header, and the text overlay shows the actual patient's name from the DICOM file.","A DICOM study, a sample logo file (PNG/JPEG).","Appium/WinAppDriver",5,US-029,US-030
SYS-OPS-001,Deployment,Functional,System,Critical,Manual Only,"Verify MSIX installer with prerequisite checks","Running the installer on a clean Windows VM that does NOT have PostgreSQL or RabbitMQ running.","1. Run the `DicomApp.msix` installer. 2. The installer prompts for DB and MQ connection details. 3. Enter invalid details. 4. The installer shows an error and does not allow completion. 5. Install the prerequisites and enter valid details.","The installer correctly fails when prerequisites are not met. After they are met, the installation succeeds, the client app is in the Start Menu, and the 'DICOM Service' is running.","Clean Windows 10/11 VM.","VirtualBox/VMware",6,US-034
SYS-OPS-002,Monitoring,Functional,System,High,Medium,"Verify System Health Dashboard displays correct status","The Administrator is logged in. The background service is running but the database has been stopped.","1. Navigate to the System Health Dashboard. 2. Observe the status indicators.","The dashboard shows the Windows Service as 'Running', RabbitMQ as 'Connected', but PostgreSQL as 'Disconnected' (or similar error state).","An admin account.","Appium/WinAppDriver",3,US-036
SYS-OPS-003,Monitoring,Functional,System,High,Medium,"Verify critical email alert is sent when DLQ has messages","An Admin email and SMTP are configured. A message is manually moved to the DLQ.","1. Manually publish and then reject a message so it lands in the DLQ. 2. Wait for the next health probe interval. 3. Check the configured administrator's email inbox.","An alert email is received with a subject like ""CRITICAL ALERT: Messages detected in Dead-Letter Queue"" and includes the count of messages in the DLQ.","Configured SMTP server.","RabbitMQ Management UI",4.5,US-036
PERF-APP-001,Application Performance,Performance,System,High,High,"Benchmark application launch time","The application is installed on a machine meeting recommended specs (SSD).","1. Measure the time from application icon double-click to the login screen being fully rendered and interactive. 2. Repeat 5 times and average the result.","The average launch time is less than 3 seconds.","N/A","Performance profiling tool",3,REQ-1-077
PERF-DICOM-001,DICOM Ingestion,Performance,System,High,High,"Benchmark C-STORE SCP concurrency","The service is running on a machine meeting recommended specs.","1. Use a test script or tool to simulate 10 concurrent DICOM SCUs, each sending a moderately sized study (e.g., 50MB). 2. While the ingestion is under heavy load, use the client application and perform basic UI actions (navigate, click buttons).","The service successfully ingests all 10 studies without crashing or timing out. The client UI remains responsive, with actions completing in under 500ms.","10 unique DICOM studies.","DCMTK, Custom test harness",8,REQ-1-078