<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Viewer Toolbar Component</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <style>
        /* Global Styles & Design System Tokens */
        :root {
            --font-family-primary: 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            --font-size-body: 16px;
            --font-size-caption: 14px;

            /* Colors */
            --color-primary-50: #E8EAF6;
            --color-primary-500: #3F51B5;
            --color-primary-700: #303F9F;
            --color-neutral-white: #FFFFFF;
            --color-neutral-50: #FAFAFA;
            --color-neutral-100: #F5F5F5;
            --color-neutral-500: #9E9E9E;
            --color-neutral-900: #212121;
            --color-focus-ring: #303F9F;

            /* Spacing */
            --spacing-xs: 4px;
            --spacing-sm: 8px;
            --spacing-md: 12px;
            --spacing-lg: 16px;

            /* Borders & Shadows */
            --border-radius-sm: 4px;
            --border-radius-md: 8px;
            --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);

            /* Transitions */
            --transition-speed: 0.2s;
        }

        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: var(--font-family-primary);
            background-color: #eef2f9;
            color: var(--color-neutral-900);
            padding: var(--spacing-lg);
        }

        .showcase {
            max-width: 1100px;
            margin: 0 auto;
            background-color: var(--color-neutral-white);
            padding: var(--spacing-lg);
            border-radius: var(--border-radius-md);
        }

        .showcase__title {
            font-size: 1.5rem;
            font-weight: 500;
            margin-bottom: var(--spacing-lg);
            border-bottom: 1px solid var(--color-neutral-100);
            padding-bottom: var(--spacing-md);
        }
        
        .showcase__section {
            margin-top: 2rem;
        }

        .showcase__section h3 {
            margin-bottom: var(--spacing-md);
            font-weight: 500;
        }
        
        .showcase__section p {
            font-size: 0.9rem;
            color: #555;
            margin-bottom: var(--spacing-lg);
        }

        .responsive-container {
            width: 700px;
            border: 2px dashed var(--color-primary-500);
            padding: var(--spacing-sm);
            overflow: hidden;
            resize: horizontal;
        }

        /* Component Base */
        .viewer-toolbar {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            padding: var(--spacing-xs) var(--spacing-md);
            background-color: var(--color-neutral-50);
            border-bottom: 1px solid var(--color-neutral-100);
            box-shadow: var(--shadow-sm);
            font-family: var(--font-family-primary);
            flex-wrap: wrap;
        }

        .viewer-toolbar__group {
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
        }

        .viewer-toolbar__separator {
            width: 1px;
            height: 24px;
            background-color: #dde1e6;
            margin: 0 var(--spacing-sm);
        }

        /* Icon Button Molecular Component */
        .viewer-toolbar .btn--icon-only {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 44px;
            height: 44px;
            padding: 0;
            border: none;
            background-color: transparent;
            border-radius: var(--border-radius-sm);
            color: var(--color-neutral-900);
            cursor: pointer;
            transition: background-color var(--transition-speed) ease, color var(--transition-speed) ease;
        }

        .viewer-toolbar .btn--icon-only svg {
            width: 24px;
            height: 24px;
        }

        /* Icon Button States */
        .viewer-toolbar .btn--icon-only:hover {
            background-color: var(--color-primary-50);
        }

        .viewer-toolbar .btn--icon-only:active,
        .viewer-toolbar .btn--icon-only[aria-pressed='true'] {
            background-color: var(--color-primary-50);
            color: var(--color-primary-500);
        }

        .viewer-toolbar .btn--icon-only:focus-visible {
            outline: 2px solid var(--color-focus-ring);
            outline-offset: 2px;
            z-index: 10;
        }

        /* ComboBox Molecular Component */
        .viewer-toolbar__preset-selector {
            position: relative;
            display: flex;
            align-items: center;
        }

        .viewer-toolbar__preset-selector select {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            height: 44px;
            padding: 0 var(--spacing-lg) 0 var(--spacing-md);
            border: 1px solid var(--color-neutral-500);
            border-radius: var(--border-radius-sm);
            background-color: var(--color-neutral-white);
            font-size: var(--font-size-caption);
            cursor: pointer;
            transition: border-color var(--transition-speed) ease;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23343a40' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 0.75rem center;
            background-size: 16px 12px;
        }

        .viewer-toolbar__preset-selector select:hover {
            border-color: var(--color-neutral-900);
        }

        .viewer-toolbar__preset-selector select:focus-visible {
            outline: 2px solid var(--color-focus-ring);
            outline-offset: 2px;
            border-color: transparent;
        }
        
        /* Overflow Menu */
        .viewer-toolbar__overflow-menu {
          position: relative;
          display: none; /* Hidden by default */
        }

        .viewer-toolbar__overflow-menu summary {
            list-style: none; /* Hide default arrow */
        }
        .viewer-toolbar__overflow-menu summary::-webkit-details-marker {
            display: none;
        }
        
        .viewer-toolbar__overflow-dropdown {
            position: absolute;
            top: calc(100% + var(--spacing-xs));
            right: 0;
            background-color: var(--color-neutral-white);
            border-radius: var(--border-radius-md);
            box-shadow: var(--shadow-md);
            padding: var(--spacing-sm) 0;
            list-style: none;
            z-index: 100;
            min-width: 180px;
            border: 1px solid var(--color-neutral-100);
        }

        .viewer-toolbar__overflow-dropdown li a {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            padding: var(--spacing-sm) var(--spacing-md);
            font-size: var(--font-size-body);
            color: var(--color-neutral-900);
            text-decoration: none;
            cursor: pointer;
        }
        
        .viewer-toolbar__overflow-dropdown li a:hover {
            background-color: var(--color-primary-50);
        }
        
        .viewer-toolbar__overflow-dropdown li a svg {
             width: 20px;
             height: 20px;
             color: var(--color-neutral-500);
        }

        /* Responsive Adaptations */
        @media (max-width: 840px) {
            .viewer-toolbar__tool--overflowable {
                display: none;
            }
            .viewer-toolbar__overflow-menu {
                display: block;
            }
        }
        
        /* Accessibility */
        @media (prefers-reduced-motion: reduce) {
            .viewer-toolbar .btn--icon-only,
            .viewer-toolbar__preset-selector select {
                transition: none;
            }
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
    </style>
</head>
<body>
    <div class="showcase">
        <h1 class="showcase__title">Viewer Toolbar</h1>

        <div class="showcase__section">
            <h3>Default State</h3>
            <p>The standard toolbar with all primary tools visible on a wide viewport.</p>
            <nav class="viewer-toolbar" aria-label="Viewer Tools">
                <!-- Group 1: Navigation Tools -->
                <div class="viewer-toolbar__group">
                    <button class="btn--icon-only" aria-label="Pan" aria-pressed="true">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 9l-3 3 3 3M9 5l3-3 3 3M15 19l-3 3-3-3M19 9l3 3-3 3M2 12h20M12 2v20"/></svg>
                    </button>
                    <button class="btn--icon-only" aria-label="Zoom">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line><line x1="11" y1="8" x2="11" y2="14"></line><line x1="8" y1="11" x2="14" y2="11"></line></svg>
                    </button>
                    <button class="btn--icon-only" aria-label="Reset View">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 2v6h6"/><path d="M21 12A9 9 0 0 0 6 5.3L3 8"/><path d="M21 22v-6h-6"/><path d="M3 12a9 9 0 0 0 15 6.7l3-2.7"/></svg>
                    </button>
                </div>
                <div class="viewer-toolbar__separator"></div>
                <!-- Group 2: Manipulation Tools -->
                <div class="viewer-toolbar__group">
                    <button class="btn--icon-only" aria-label="Window Level">
                       <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3.5"></circle><path d="M12 2a10 10 0 0 0-10 10c0 4.4 3.2 8.1 7.3 9.4L12 22l2.7-1.2A10 10 0 0 0 22 12a10 10 0 0 0-10-10z"></path><path d="M12 2v4"></path><path d="M12 22v-4"></path><path d="m20.9 15.4-.5-1.8-1.8-.5"></path><path d="m3.1 8.6.5 1.8 1.8.5"></path><path d="M22 12h-4"></path><path d="M2 12h4"></path><path d="m3.1 15.4.5-1.8 1.8-.5"></path><path d="m20.9 8.6-.5 1.8-1.8.5"></path></svg>
                    </button>
                    <button class="btn--icon-only" aria-label="Rotate">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 1 1-6.219-8.56"/></svg>
                    </button>
                </div>
                <div class="viewer-toolbar__separator"></div>
                <!-- Group 3: Presets -->
                <div class="viewer-toolbar__group">
                    <div class="viewer-toolbar__preset-selector">
                        <label for="wwl-presets" class="sr-only">Window/Level Presets</label>
                        <select id="wwl-presets" aria-labelledby="wwl-presets">
                            <option value="lung">Lung</option>
                            <option value="bone">Bone</option>
                            <option value="brain">Brain</option>
                            <option value="abdomen">Abdomen</option>
                        </select>
                    </div>
                </div>
                 <div class="viewer-toolbar__separator"></div>
                 <!-- Group 4: Overflowable Tools -->
                 <div class="viewer-toolbar__group">
                    <button class="btn--icon-only viewer-toolbar__tool--overflowable" aria-label="Annotate">
                       <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/></svg>
                    </button>
                    <button class="btn--icon-only viewer-toolbar__tool--overflowable" aria-label="Measure">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L3 8.7a2.4 2.4 0 0 1 0-3.4l2.6-2.6a2.4 2.4 0 0 1 3.4 0L15.3 9"/></svg>
                    </button>
                    <button class="btn--icon-only viewer-toolbar__tool--overflowable" aria-label="Print">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 6 2 18 2 18 9"></polyline><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path><rect x="6" y="14" width="12" height="8"></rect></svg>
                    </button>
                </div>
                <!-- Group 5: Overflow Menu -->
                <details class="viewer-toolbar__overflow-menu">
                    <summary class="btn--icon-only" aria-label="More Tools">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="1"></circle><circle cx="19" cy="12" r="1"></circle><circle cx="5" cy="12" r="1"></circle></svg>
                    </summary>
                    <ul class="viewer-toolbar__overflow-dropdown">
                        <li><a href="#"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/></svg>Annotate</a></li>
                        <li><a href="#"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L3 8.7a2.4 2.4 0 0 1 0-3.4l2.6-2.6a2.4 2.4 0 0 1 3.4 0L15.3 9"/></svg>Measure</a></li>
                        <li><a href="#"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 6 2 18 2 18 9"></polyline><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path><rect x="6" y="14" width="12" height="8"></rect></svg>Print</a></li>
                    </ul>
                </details>
            </nav>
        </div>

        <div class="showcase__section">
            <h3>Responsive Overflow State</h3>
            <p>On viewports narrower than 840px, less critical tools move into a "More" menu. Resize the dashed container below to see this effect.</p>
            <div class="responsive-container">
                <!-- The same toolbar component is placed here to demonstrate responsiveness -->
                <nav class="viewer-toolbar" aria-label="Responsive Viewer Tools">
                    <div class="viewer-toolbar__group">
                        <button class="btn--icon-only" aria-label="Pan"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 9l-3 3 3 3M9 5l3-3 3 3M15 19l-3 3-3-3M19 9l3 3-3 3M2 12h20M12 2v20"/></svg></button>
                        <button class="btn--icon-only" aria-label="Zoom"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line><line x1="11" y1="8" x2="11" y2="14"></line><line x1="8" y1="11" x2="14" y2="11"></line></svg></button>
                        <button class="btn--icon-only" aria-label="Reset View"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 2v6h6"/><path d="M21 12A9 9 0 0 0 6 5.3L3 8"/><path d="M21 22v-6h-6"/><path d="M3 12a9 9 0 0 0 15 6.7l3-2.7"/></svg></button>
                    </div>
                    <div class="viewer-toolbar__separator"></div>
                    <div class="viewer-toolbar__group">
                        <button class="btn--icon-only" aria-label="Window Level"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3.5"></circle><path d="M12 2a10 10 0 0 0-10 10c0 4.4 3.2 8.1 7.3 9.4L12 22l2.7-1.2A10 10 0 0 0 22 12a10 10 0 0 0-10-10z"></path><path d="M12 2v4"></path><path d="M12 22v-4"></path><path d="m20.9 15.4-.5-1.8-1.8-.5"></path><path d="m3.1 8.6.5 1.8 1.8.5"></path><path d="M22 12h-4"></path><path d="M2 12h4"></path><path d="m3.1 15.4.5-1.8 1.8-.5"></path><path d="m20.9 8.6-.5 1.8-1.8.5"></path></svg></button>
                        <button class="btn--icon-only" aria-label="Rotate"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 1 1-6.219-8.56"/></svg></button>
                    </div>
                    <div class="viewer-toolbar__separator"></div>
                    <div class="viewer-toolbar__group">
                        <div class="viewer-toolbar__preset-selector">
                           <label for="wwl-presets-resp" class="sr-only">Window/Level Presets</label>
                           <select id="wwl-presets-resp" aria-labelledby="wwl-presets-resp"><option>Lung</option><option>Bone</option></select>
                        </div>
                    </div>
                    <div class="viewer-toolbar__separator"></div>
                    <div class="viewer-toolbar__group">
                        <button class="btn--icon-only viewer-toolbar__tool--overflowable" aria-label="Annotate"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/></svg></button>
                        <button class="btn--icon-only viewer-toolbar__tool--overflowable" aria-label="Measure"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L3 8.7a2.4 2.4 0 0 1 0-3.4l2.6-2.6a2.4 2.4 0 0 1 3.4 0L15.3 9"/></svg></button>
                        <button class="btn--icon-only viewer-toolbar__tool--overflowable" aria-label="Print"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 6 2 18 2 18 9"></polyline><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path><rect x="6" y="14" width="12" height="8"></rect></svg></button>
                    </div>
                    <details class="viewer-toolbar__overflow-menu">
                         <summary class="btn--icon-only" aria-label="More Tools">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="1"></circle><circle cx="19" cy="12" r="1"></circle><circle cx="5" cy="12" r="1"></circle></svg>
                         </summary>
                         <ul class="viewer-toolbar__overflow-dropdown">
                           <li><a href="#"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/></svg>Annotate</a></li>
                           <li><a href="#"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L3 8.7a2.4 2.4 0 0 1 0-3.4l2.6-2.6a2.4 2.4 0 0 1 3.4 0L15.3 9"/></svg>Measure</a></li>
                           <li><a href="#"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 6 2 18 2 18 9"></polyline><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path><rect x="6" y="14" width="12" height="8"></rect></svg>Print</a></li>
                         </ul>
                    </details>
                </nav>
            </div>
        </div>
    </div>
</body>
</html>