story_id,epic,title,user_role,description,priority,story_points,dependencies,acceptance_criteria_1,acceptance_criteria_2,acceptance_criteria_3,technical_tasks,definition_of_done
"TS-001","Core Application Architecture & Setup","Establish Solution Foundation and IPC","Developer","As a Developer, I need the solution and project structure to be created with Dependency Injection and Inter-Process Communication (IPC) frameworks configured, so that there is a clean, maintainable, and decoupled foundation for building application features.","Must Have","13","","Given the project requires a client-server architecture, When the solution is scaffolded, Then it must contain separate projects for Client, Service, Core, Application, Infrastructure, and Persistence, all building successfully.","Given the client and service need to communicate, When the IPC infrastructure is built, Then reliable asynchronous messaging (RabbitMQ) and synchronous status checks (Named Pipes) are available as injectable services.","Given services need to be managed throughout the application, When Dependency Injection is configured, Then both the WPF Client and Windows Service have a DI container set up at their entry points to resolve dependencies.","WI-001, WI-002, WI-003, WI-004","All projects are created and build successfully. DI is configured in both client and service. RabbitMQ and Named Pipe infrastructure services are implemented and unit-tested. Code is reviewed and merged to the main branch."
"US-101","Security & Compliance","Log In to the Application","Registered User","As a Registered User, I want to securely log in with my username and password, so that I can access the application's features based on my role.","Must Have","8","TS-001","Given I am on the login screen with a valid active account, When I enter my correct username and password and click 'Login', Then the main application window is displayed with features enabled for my role.","Given I am on the login screen, When I enter a correct username but an incorrect password, Then a generic 'Invalid username or password.' error is shown and the password field is cleared.","Given my user account has been disabled by an administrator, When I enter my correct username and password, Then an error message 'Your account has been disabled. Please contact an administrator.' is displayed and I am denied access.","WI-005, WI-006, WI-007","User & Role data models are created in EF Core. BCrypt is used for password hashing. A login UI and ViewModel are created that use an AuthenticationService. All AC are met and E2E tests for login success, failure, and disabled account scenarios are passing."
"US-102","Security & Compliance","Access Features Based on Role","System User","As a System User, I want the application's UI and features to be restricted based on my assigned role (Technician or Administrator), so that I can only perform authorized actions, ensuring security.","Must Have","8","US-101","Given I am logged in as a 'Technician', When I navigate the application, Then the 'Administration' area and the 'Edit DICOM Metadata' button must be hidden or disabled.","Given I am logged in as an 'Administrator', When I navigate the application, Then I have access to all features, including the 'Administration' area and 'Edit DICOM Metadata'.","Given a 'Technician' attempts to programmatically access an admin-only function, When the action is invoked, Then the request is rejected by the backend with an authorization error.","WI-008","An AuthorizationService is created to check the current user's role. ViewModels bind UI element visibility/enabled state to the authorization service. Unit tests verify the service logic, and E2E tests confirm the UI state for both Technician and Admin roles."
"US-103","System Administration & Configuration","Create a New User Account","Administrator","As an Administrator, I want to create a new user account with a username, role, and a system-generated temporary password, so that I can provision access for new staff members.","Must Have","5","US-102, US-107","Given I am an Admin on the 'User Management' page, When I fill out the new user form with a unique username and role and click 'Create', Then the new user appears in the list and a success notification displays their temporary password.","Given a new user is created, When that user logs in for the first time with the temporary password, Then they are immediately forced to create a new, permanent password.","Given I have created a new user, When I check the audit trail, Then a 'User Created' event is logged with my user ID, the new user's name, and a timestamp.","WI-021, WI-009","A User Management UI is created. The backend logic enforces unique usernames and generates secure temporary passwords. The user creation action and the audit log entry are created within a single database transaction. All AC are met."
"US-104","System Administration & Configuration","Edit a User's Role or Status","Administrator","As an Administrator, I want to edit an existing user's role or disable their account, so that I can manage user permissions and revoke access when necessary.","Must Have","5","US-102, US-107","Given I am an Admin on the 'User Management' page, When I edit a user and change their role from 'Technician' to 'Administrator' and save, Then the user's role is updated in the UI and the change is logged in the audit trail.","Given I am an Admin on the 'User Management' page, When I edit a user and set their account status to 'Disabled', Then that user can no longer log in to the application.","Given there is only one Administrator account left in the system, When I attempt to change that user's role or disable the account, Then the action is prevented with an error message.","WI-021, WI-009","The User Management UI allows editing of user role and status. Backend logic prevents disabling/demoting the last administrator. All changes are recorded in the audit trail atomically with the user update. All AC are met."
"US-105","System Administration & Configuration","Delete a User Account","Administrator","As an Administrator, I want to permanently delete a user account, so that I can irrevocably remove a former employee's access in line with security policies.","Must Have","3","US-102, US-107","Given I am an Admin on the 'User Management' page, When I select a user, click 'Delete', and confirm the action, Then the user is permanently removed from the system and no longer appears in the user list.","Given I attempt to delete my own user account, When I locate my entry in the user list, Then the 'Delete' option is disabled.","Given I have deleted a user, When I check the audit trail, Then a 'User Deleted' event is logged with my user ID and the deleted user's username.","WI-021, WI-009","The User Management UI provides a delete function with confirmation. Backend logic prevents self-deletion. The user deletion and audit log creation are performed in a single transaction. All AC are met."
"US-106","System Administration & Configuration","Reset a User's Password","Administrator","As an Administrator, I want to reset a user's password, so that I can restore their access if they have forgotten their credentials.","Must Have","5","US-102, US-107","Given I am an Admin on the 'User Management' page, When I select a user and click 'Reset Password', Then a new temporary password is generated and displayed to me in a success notification.","Given a user's password has been reset, When they log in with the temporary password, Then they are immediately forced to set a new permanent password before proceeding.","Given I have reset a user's password, When I check the audit trail, Then a 'Password Reset' event is logged for that user.","WI-021, WI-009","The User Management UI provides a password reset function. The backend logic generates a secure temporary password and flags the user account to force a change on next login. The action is audited. All AC are met."
"US-107","Security & Compliance","View and Export Audit Trail","Administrator","As an Administrator, I want to view a log of all significant system events, with the ability to filter and export, so that I can investigate security incidents and ensure compliance.","Must Have","8","US-102","Given I am an Admin in the 'Administration' area, When I open the 'Audit Trail' viewer, Then I see a time-ordered list of events like user logins, user creations, and metadata changes.","Given the audit trail is displayed, When I apply a filter for a specific user and date range, Then the list updates to show only the matching log entries.","Given I have filtered the audit log, When I click the 'Export to CSV' button, Then a CSV file containing the currently displayed log entries is generated for download.","WI-009","An AuditLog entity and service are created to persist events. An 'Audit Trail' view is created in the WPF client, available only to Admins. The view provides filtering by user/date and an export-to-CSV function. All AC are met."
"US-108","Security & Compliance","Ensure Data is Securely Stored","System Owner","As the System Owner, I want all Protected Health Information (PHI) in the database to be encrypted and all application secrets to be stored securely, so that we are compliant with HIPAA and protected against data breaches.","Must Have","13","US-101","Given the application is configured to connect to the PostgreSQL database, When data is written to a PHI-designated column (e.g., Patient Name), Then the data is stored in an encrypted format within the database using pgcrypto.","Given the application needs to connect to the database, When the application starts, Then it retrieves the database password from the secure Windows Credential Manager, not from a plaintext config file.","Given the application connects to PostgreSQL, When the connection is established, Then it must use TLS encryption (`SslMode=Require`).","WI-010, WI-011","EF Core is configured to use value converters for pgcrypto functions on PHI columns. An infrastructure service is created to read/write secrets to the Windows Credential Manager. The database connection string is configured to require TLS. All AC are verified."
"US-109","DICOM Core Functionality","Receive and Ingest DICOM Studies","Technician","As a Technician, I want the system to automatically receive and store studies sent from our imaging modalities, so that new imaging data is available for viewing quickly and reliably, even under heavy load.","Must Have","13","TS-001","Given the system is running, When an external modality sends a study via DICOM C-STORE, Then the DICOM files are saved and their metadata is persisted to the database.","Given multiple modalities are sending studies simultaneously, When studies are being received, Then the system remains responsive and successfully processes all incoming studies without data loss.","Given a study is successfully received, When I search for the patient, Then the new study appears in the study list, ready for viewing.","WI-012, WI-013","A C-STORE SCP listener is implemented in the Windows Service using `fo-dicom`. It decouples file reception from database persistence by publishing metadata to a RabbitMQ queue. A separate consumer processes this queue and writes to PostgreSQL. E2E tests verify data integrity from C-STORE to database."
"US-110","DICOM Core Functionality","Query and Retrieve Studies from a Remote PACS","Technician","As a Technician, I want to search for studies on a remote PACS and retrieve them to the local system, so that I can access prior imaging or studies from other facilities.","Must Have","8","US-109, US-117","Given I am in the PACS Query view, When I enter search criteria (e.g., Patient ID) and click 'Search', Then a list of matching studies from the configured remote PACS is displayed.","Given a list of search results from a PACS is displayed, When I select one or more studies and click 'Retrieve', Then the system initiates a DICOM C-MOVE request to transfer the studies to the local storage.","Given a C-MOVE retrieval is in progress, When the transfer is happening, Then the UI provides real-time feedback on the progress and reports a final success or failure status.","WI-014","A DICOM SCU service is created using `fo-dicom` to handle C-FIND and C-MOVE operations. A `PacsQueryView` is built in WPF for user interaction. All network operations are asynchronous to keep the UI responsive. All AC are met."
"US-111","DICOM Viewer & Tools","View High-Performance DICOM Images","Technician","As a Technician, I want a high-performance viewer to open and display DICOM images of any size, so that I can perform clinical review without lag or delay.","Must Have","21","","Given I select a DICOM study from the list, When I open it, Then the images are displayed in a viewer control using GPU acceleration for rendering.","Given I open a large multi-frame series (e.g., CT scan), When the study is loading, Then a low-resolution preview is shown immediately, followed by the full-resolution image data loading progressively.","Given I am viewing an image, When I perform actions like panning or zooming, Then the interaction is smooth and responsive, with no stuttering.","WI-015","A custom WPF control is built using DirectX interop (`Vortice.Windows`) for GPU-accelerated rendering. A progressive loading strategy is implemented. The control can render monochrome and color DICOM images. Performance targets are met on specified hardware."
"US-112","DICOM Viewer & Tools","Manipulate Images with Viewer Tools","Technician","As a Technician, I want to use standard tools like zoom, pan, and window/level adjustment, so that I can properly examine the details of a DICOM image.","Must Have","8","US-111","Given an image is open in the viewer, When I use my mouse, Then I can pan the image by dragging and zoom using the scroll wheel.","Given a CT image is open, When I right-click and drag the mouse, Then I can interactively adjust the window width and level (WW/WL) to change image contrast and brightness.","Given I am viewing an image, When I select a WW/WL preset like 'Lung' or 'Bone' from a menu, Then the corresponding window/level values are applied to the image instantly.","WI-016","Tool logic is implemented for zoom, pan, and interactive WW/WL. A list of common WW/WL presets is available. User mouse inputs are translated into tool commands within the Viewer ViewModel. All tools function smoothly over the GPU-rendered image."
"US-113","DICOM Viewer & Tools","Create and Save Annotations","Technician","As a Technician, I want to draw annotations and measurements on an image and save them, so that I can highlight findings and communicate them to others.","Should Have","13","US-111","Given an image is open in the viewer, When I select the 'Length' tool and draw a line, Then the line is displayed on the image with its length calculated in millimeters.","Given I have added annotations (e.g., arrows, text, measurements) to a series, When I click 'Save Annotations', Then a new DICOM Grayscale Softcopy Presentation State (GSPS) object is created and associated with the series.","Given I re-open a study that has saved annotations, When the images are displayed, Then the previously saved annotations are automatically loaded and displayed on the correct images.","WI-017","Tools are implemented for drawing various shapes and measurements. A service is created using `fo-dicom` to generate and parse DICOM GSPS objects. The viewer can render annotations from a GSPS object. All AC are met."
"US-114","Printing & Exporting","Prepare a Custom Print Layout","Technician","As a Technician, I want a print preview screen to arrange images, select layouts, and add custom branding, so that I can create professional and clear physical or digital printouts.","Must Have","8","US-111","Given I have selected images to print, When the print preview window opens, Then I can select from a list of predefined layouts, such as '2x2 grid on A4'.","Given I am in the print preview, When I interact with the layout, Then I can drag-and-drop images to different cells in the grid to reorder them.","Given I want to add branding, When I use the branding options, Then I can upload a custom logo and add dynamic text fields (e.g., `[PatientID]`) that will be populated with DICOM metadata.","WI-018","A `PrintPreviewView` and ViewModel are created in WPF. It supports layout selection, page configuration (margins, orientation), and drag-and-drop image rearrangement. Branding options for logos and dynamic text are implemented. All AC are met."
"US-115","Printing & Exporting","Print a Study Asynchronously","Technician","As a Technician, I want to send a print job to a physical printer without locking up the application, so that I can continue working while the print job is processed in the background.","Must Have","8","US-114, TS-001","Given I have finalized my layout in the print preview, When I click the 'Print' button, Then the application immediately displays a 'Print job queued' notification and I can continue using the application.","Given the background service is not running, When I open the print preview, Then the 'Print' button is disabled and a message indicates the print service is unavailable.","Given a print job is sent, When the background service receives it, Then it processes the layout and spools the job to the selected Windows printer.","WI-019, WI-020","The 'Print' button action serializes the print job and publishes it to a durable RabbitMQ queue. The client first checks service status via Named Pipes. A consumer in the Windows Service processes the queue and uses the Windows Print API to print. All AC are met."
"US-116","Printing & Exporting","Export a Study to a Secure PDF","Technician","As a Technician, I want to export my print layout as a secure, password-protected PDF/A-compliant file, so that I can share a digital copy of the study securely.","Should Have","5","US-114, TS-001","Given I have finalized my layout in the print preview, When I click 'Export to PDF' and provide a filename and password, Then a password-protected PDF/A-3 file is generated asynchronously in the background.","Given I have chosen to export to PDF, When the export completes successfully, Then a success notification is displayed.","Given I open the generated PDF, When prompted for a password, Then the password I provided during export successfully opens the encrypted file.","WI-019, WI-020","The 'Export to PDF' action serializes the job and publishes it to a RabbitMQ queue. A consumer in the Windows Service uses the QuestPDF library to generate a PDF/A-3 file. The consumer supports applying AES-256 encryption using a user-provided password. All AC are met."
"US-117","System Administration & Configuration","Configure and Verify PACS Connections","Administrator","As an Administrator, I want to add, edit, and verify connections to remote PACS servers, so that technicians can query and retrieve studies from them.","Must Have","5","US-102, US-110","Given I am an Admin in the 'PACS Configuration' settings, When I enter the AE Title, IP, and Port for a new PACS and click 'Save', Then the new PACS configuration is added to the system.","Given a PACS is configured in the list, When I click the 'Verify' button, Then the system performs a DICOM C-ECHO request to that PACS and displays a 'Success' or 'Failure' message.","Given a PACS configuration is no longer needed, When I select it and click 'Delete', Then it is removed from the system.","WI-022","A `PacsConfigView` and ViewModel are created for Admins. It allows CRUD operations for PACS configurations stored in the database. The 'Verify' button triggers a C-ECHO via the DICOM SCU service. All AC are met."
"US-118","System Administration & Configuration","Configure Automated DICOM Routing Rules","Administrator","As an Administrator, I want to create rules to automatically route incoming studies to specific folders based on their metadata, so that our storage is organized and automated.","Should Have","3","US-102, US-109","Given I am an Admin in the 'Auto-Routing' settings, When I create a new rule, Then I can specify criteria (e.g., 'Sending AE Title is MODALITY_CT') and a destination folder path (e.g., 'D:\CT_Studies').","Given a new study is received via C-STORE that matches a configured rule, When the system processes the study, Then the DICOM files are stored in the rule's specified destination folder.","Given no rules match an incoming study, When it is processed, Then it is stored in a default, system-wide storage location.","WI-022","An `AutoRoutingView` is created for Admins to manage rules in the database. The DICOM ingestion process is modified to evaluate these rules before moving files to their permanent storage location. All AC are met."
"US-119","System Administration & Configuration","Monitor Real-Time System Health","Administrator","As an Administrator, I want a single dashboard to view the real-time health of critical system components, so that I can proactively identify and troubleshoot issues.","Should Have","8","US-102, TS-001","Given I am an Admin and I open the 'System Health Dashboard', When the view loads, Then it displays the current status (e.g., 'Running'/'Stopped') of the background Windows Service.","Given I am viewing the health dashboard, When the dashboard is open, Then it shows green/red indicators for PostgreSQL and RabbitMQ connectivity, and the current number of messages in the main and dead-letter queues.","Given I am viewing the health dashboard, When the view is open, Then it displays the available disk space at the primary DICOM storage location and shows a warning if it falls below a configured threshold.","WI-023","A background polling service is created in the Windows Service to periodically check dependency statuses and cache the results. A communication channel (e.g., Named Pipe) allows the client to fetch this cached status. A `SystemHealthDashboardView` in the client displays this information. All AC are met."
"US-120","Deployment & Operations","Install the Application and Service","System Administrator","As a System Administrator, I want to use a single, signed MSIX installer to reliably deploy the client application and its background Windows Service, so that the deployment process is simple and repeatable.","Must Have","13","TS-001","Given I run the MSIX installer, When the installation process begins, Then it prompts me for the connection details for the existing PostgreSQL and RabbitMQ servers and validates connectivity.","Given the prerequisite checks pass, When the installation completes, Then the WPF client application is installed and the background 'DICOM Service' is registered as a Windows Service and started.","Given I provide incorrect database connection details during installation, When the installer runs its check, Then the installation fails with a clear error message, and no software is installed.","WI-024","An MSIX packaging project is added to the solution. It is configured to bundle the client and service. The installer includes a custom pre-install step to check for PostgreSQL and RabbitMQ connectivity. The final package is signed with a code-signing certificate. All AC are met."
"US-121","Deployment & Operations","Access Deployment and Admin Guides","System Administrator","As a System Administrator, I want to have clear and concise documentation for deploying and managing the application, so that I can perform my duties efficiently and correctly without needing direct developer support.","Should Have","5","","Given I am responsible for installing the software, When I consult the documentation, Then I find a 'Deployment Guide' with step-by-step instructions for running the installer and configuring prerequisites.","Given I am responsible for managing the deployed application, When I consult the documentation, Then I find an 'Administrator's Guide' that explains how to perform all administrative tasks like user management and PACS configuration.","Given I need to find information quickly, When I review the guides, Then they are well-structured with a table of contents, clear headings, and screenshots where appropriate.","WI-026","Two markdown documents, DeploymentGuide.md and AdminGuide.md, are created. The Deployment Guide covers the MSIX installation. The Admin Guide covers all features within the 'Administration' section of the UI. The documents are reviewed for clarity and accuracy."
"TS-002","Deployment & Operations","Automate Build and Vulnerability Scanning","Developer","As a Developer, I want a Continuous Integration (CI) pipeline that automatically builds the code, runs tests, and scans for known vulnerabilities in third-party libraries, so that we can ensure code quality and security with every change.","Must Have","5","","Given I push new code to the source control repository, When the push is completed, Then a CI pipeline is automatically triggered.","Given the CI pipeline is running, When it executes, Then it successfully builds the entire solution and runs all unit tests, failing the pipeline if any test fails.","Given the tests have passed, When the pipeline continues, Then it runs an OWASP Dependency-Check scan and fails the build if any critical vulnerabilities are found in the project's dependencies.","WI-025","A CI pipeline is created using a YAML file (e.g., for GitHub Actions). The pipeline defines steps to build the .NET solution, execute xUnit tests, and run the OWASP Dependency-Check tool. The pipeline is configured to run on every push to the main branch."