"story_id","epic","title","user_role","description","business_value","priority","story_points","dependencies","acceptance_criteria","technical_tasks","definition_of_done"
"US-000","Core Architecture & Solution Setup","Establish Foundational Solution Architecture","Lead Developer","As a Lead Developer, I want a robust and scalable solution structure with centralized dependency injection, configuration, and structured logging so that the development team can build features consistently, efficiently, and in a maintainable way.","Provides the essential architectural backbone for all other features, ensuring maintainability, scalability, and consistency. Reduces technical debt and accelerates future development.","Must Have","8","[]","[{""scenario"":""Solution Structure and Compilation"",""given"":""the solution has been scaffolded according to Clean Architecture principles"",""when"":""a developer builds the solution"",""then"":""all projects compile successfully without errors and project references are correctly configured.""},{""scenario"":""Dependency Injection and Logging Initialization"",""given"":""the WPF client and Windows Service projects are configured with Generic Host"",""when"":""each application starts"",""then"":""the DI container is successfully built, and Serilog is configured to write to both a rolling file and the Windows Event Log.""},{""scenario"":""PHI Redaction in Logs"",""given"":""a log message containing known PHI patterns is generated"",""when"":""the message is processed by Serilog"",""then"":""the output in both the file and Event Log shows the PHI data as masked or redacted.""},{""scenario"":""Correlation ID Propagation"",""given"":""an asynchronous operation is initiated"",""when"":""logs are generated throughout the operation's lifecycle"",""then"":""all related log entries contain the same unique correlation ID.""}]","[""WI-001"",""WI-002"",""WI-003"",""WI-004""]","[""Solution structure is approved by the architecture team."",""DI containers for both client and service are functional."",""Centralized logging with PHI redaction is implemented and unit tested."",""Correlation ID mechanism is in place and validated.""]"
"US-001","User Authentication & Authorization","User Login with Username and Password","Registered System User","As a Registered System User (Technician or Administrator), I want to securely log in to the application using my unique username and password so that I can gain access to the system and use the features authorized for my role.","Ensures only authorized personnel can access PHI, meeting HIPAA compliance and enabling the RBAC model which is fundamental to the system's operation.","Must Have","8","[""US-000""]","[{""scenario"":""Successful login with valid credentials"",""given"":""a user has a valid and active account"",""when"":""the user enters their correct username and password and clicks 'Login'"",""then"":""the system validates the credentials, the login window closes, and the main application window is displayed with features appropriate for the user's role.""},{""scenario"":""Login attempt with an incorrect password"",""given"":""a user has a valid and active account"",""when"":""the user enters their correct username but an incorrect password"",""then"":""the system displays a non-specific error message 'Invalid username or password.' and the user remains on the login screen.""},{""scenario"":""Login attempt with a disabled account"",""given"":""a user's account has been disabled by an administrator"",""when"":""the user enters their correct credentials for the disabled account"",""then"":""the system displays the error message 'Your account has been disabled. Please contact an administrator.'""}]","[""WI-005"",""WI-006"",""WI-007"",""WI-008"",""WI-009""]","[""User schema is migrated to the database."",""BCrypt password hashing and verification is implemented and unit tested."",""Login UI and ViewModel are complete and functional."",""Authentication service correctly handles all login scenarios."",""E2E test for successful and failed login attempts is passing.""]"
"US-002","User Authentication & Authorization","Enforce Role-Based Feature Access","System User","As a System User (Technician or Administrator), I want the application's features and UI controls to be enabled or disabled based on my assigned role so that I can only perform authorized actions, ensuring system security.","Enforces the principle of least privilege, a core security requirement for HIPAA compliance. Prevents unauthorized access to sensitive data and system configurations, reducing operational risk.","Must Have","5","[""US-001""]","[{""scenario"":""Technician has restricted access to administrative functions"",""given"":""a user is authenticated with the 'Technician' role"",""when"":""the user navigates the application"",""then"":""the 'Administration' area and all its sub-features are hidden and inaccessible.""},{""scenario"":""Technician cannot edit DICOM metadata"",""given"":""a 'Technician' user is viewing a study"",""when"":""the user interacts with the metadata view"",""then"":""the UI control to 'Edit DICOM Metadata' is disabled or hidden.""},{""scenario"":""Administrator has full access to all functions"",""given"":""a user is authenticated with the 'Admin' role"",""when"":""the user navigates the application"",""then"":""all features, including the 'Administration' area and 'Edit Metadata' controls, are visible and enabled.""}]","[""WI-011"",""WI-012""]","[""Authorization service correctly identifies user roles."",""UI controls for admin functions are hidden/disabled for Technicians."",""Backend service calls for admin functions reject requests from Technicians."",""E2E tests verify the correct UI state and access for both Admin and Technician roles.""]"
"US-003","User Authentication & Authorization","Secure Session with Automatic Inactivity Lock","System User","As a System User, I want the application to automatically lock itself after 15 minutes of inactivity so that sensitive Protected Health Information (PHI) is protected from unauthorized viewing on an unattended workstation.","Enhances security and ensures HIPAA compliance by automatically securing sessions on unattended workstations, mitigating the risk of unauthorized PHI access.","Must Have","8","[""US-001""]","[{""scenario"":""Session locks after the configured inactivity period"",""given"":""a user is logged into the application"",""when"":""the user performs no keyboard or mouse actions for 15 minutes"",""then"":""a modal lock screen overlay is displayed, obscuring the entire application window.""},{""scenario"":""Inactivity timer resets upon user interaction"",""given"":""a user is logged into the application"",""when"":""the user performs a mouse click or key press after 14 minutes of inactivity"",""then"":""the inactivity timer is reset, and the session remains active.""},{""scenario"":""Application state is preserved behind the lock screen"",""given"":""a user has a study open with specific viewer settings"",""when"":""the session automatically locks"",""then"":""the application state is preserved in memory behind the lock screen.""}]","[""WI-010""]","[""Global inactivity monitoring service is implemented with low performance overhead."",""Lock screen UI is complete."",""The lock screen is successfully triggered after the timeout."",""The lock mechanism is confirmed to be non-destructive to the current application state.""]"
"US-004","User Authentication & Authorization","Unlock a Locked Session with Password","System User","As a System User whose session has been locked, I want to enter my password to securely unlock my session so that I can resume my work from where I left off without losing my application state.","Provides a secure and seamless user experience that maintains workflow continuity after an inactivity lock, preventing loss of work while ensuring security.","Must Have","3","[""US-003""]","[{""scenario"":""Successful Unlock with Correct Password"",""given"":""the application session is locked and the lock screen is displayed"",""when"":""the user enters their correct password and clicks 'Unlock'"",""then"":""the lock screen is removed, and the application UI is restored to its exact pre-lock state.""},{""scenario"":""Unlock Attempt with Incorrect Password"",""given"":""the application session is locked"",""when"":""the user enters an incorrect password"",""then"":""an error message 'Invalid password. Please try again.' is displayed, and the session remains locked.""}]","[""WI-010""]","[""Lock screen ViewModel correctly validates the entered password against the authentication service."",""Successful validation removes the lock screen overlay."",""Failed validation displays the correct error message."",""E2E test verifies the lock and successful unlock workflow.""]"
"US-005","System Administration","Manage Users in Administration Area","Administrator","As an Administrator, I want a user management interface to create, edit, and delete user accounts so that I can maintain an accurate and secure user base in line with personnel changes.","Enables secure and efficient lifecycle management of user accounts, a fundamental requirement for operational readiness and security compliance.","Must Have","8","[""US-002"",""US-013""]","[{""scenario"":""Admin creates a new Technician user"",""given"":""an Admin is on the 'User Management' page"",""when"":""they click 'Add User', enter a unique username, select the 'Technician' role, and click 'Create'"",""then"":""a new user is created, a success notification with a temporary password is shown, and an audit entry is created.""},{""scenario"":""Admin changes a user's role"",""given"":""an Admin is on the 'User Management' page"",""when"":""they edit a 'Technician' user and change their role to 'Administrator' and save"",""then"":""the user's role is updated in the system and an audit entry is created for the change.""},{""scenario"":""Admin deletes a user"",""given"":""an Admin is on the 'User Management' page"",""when"":""they select a user, click 'Delete', and confirm the action"",""then"":""the user account is permanently removed from the system and an audit entry is created.""},{""scenario"":""Admin is prevented from deleting the last administrator"",""given"":""only one Administrator account exists"",""when"":""an Admin attempts to delete that account"",""then"":""the system prevents the deletion and displays an error message.""}]","[""WI-054"",""WI-055""]","[""User Management UI is complete and restricted to Admins."",""Application service for user CRUD operations is fully implemented with business rule enforcement."",""All user management actions are correctly logged in the audit trail."",""Integration tests validate all CRUD operations and business rules.""]"
"US-006","System Administration","Reset a User's Password","Administrator","As an Administrator, I want to reset a user's password and generate a temporary one so that I can securely restore their access when they have forgotten their credentials.","Ensures business continuity by providing a secure method for restoring user access. Supports security policies by enforcing immediate password changes after a reset.","Must Have","5","[""US-005"",""US-007""]","[{""scenario"":""Admin successfully resets a user's password"",""given"":""an Administrator is on the User Management page"",""when"":""the Administrator selects a user, clicks 'Reset Password', and confirms"",""then"":""a dialog is displayed to the Administrator containing a new temporary password, and the user's account is flagged to require a password change on next login.""},{""scenario"":""Admin cannot reset their own password"",""given"":""an Administrator is on the User Management page"",""when"":""they locate their own account"",""then"":""the 'Reset Password' option is disabled.""},{""scenario"":""Password reset is logged in the audit trail"",""given"":""an Admin has reset a user's password"",""when"":""the action is completed"",""then"":""a new entry is created in the audit trail for the 'Password Reset' event.""}]","[""WI-056""]","[""Password reset logic is implemented in the User Management service."",""UI flow for resetting a password is functional."",""The user's account is correctly flagged for a forced password change."",""The action is verifiably logged in the audit trail.""]"
"US-007","System Administration","Enforce Password Change After Admin Reset","System User","As a System User whose password was reset, I want to be forced to create a new password upon my next login so that my account is immediately secured and only I know the credentials.","Enhances account security by ensuring temporary passwords are immediately replaced with a private password known only to the user, a critical control for HIPAA compliance.","Must Have","5","[""US-006""]","[{""scenario"":""Successful forced password change on first login"",""given"":""a user's account is flagged for a mandatory password reset"",""when"":""the user logs in with the correct temporary password"",""then"":""the system presents a non-dismissible 'Create New Password' screen.""},{""scenario"":""User sets a new valid password"",""given"":""a user is on the 'Create New Password' screen"",""when"":""they enter a new password that meets the system's policy and click 'Set Password'"",""then"":""the new password is set, the flag is cleared, and they are redirected to the main application.""},{""scenario"":""User is prevented from bypassing the screen"",""given"":""a user is on the 'Create New Password' screen"",""when"":""they attempt to close the screen or navigate elsewhere"",""then"":""the action is prevented, and the screen remains active.""}]","[""WI-058"",""WI-057""]","[""Authentication service is modified to check the 'force password change' flag."",""The mandatory password change UI and ViewModel are complete."",""The new password is validated against the configured system policy."",""E2E test of the entire reset -> login -> forced change workflow is passing.""]"
"US-008","DICOM Services & Processing","Receive and Process DICOM Studies (C-STORE SCP)","System","As a System, I want to function as a DICOM C-STORE SCP with a decoupled persistence layer so that I can reliably and efficiently receive studies from imaging modalities at high throughput without losing data.","Provides the fundamental capability to receive medical imaging data, which is the primary input for the system. The decoupled architecture ensures high availability and scalability.","Must Have","13","[""US-000"",""US-010""]","[{""scenario"":""Successfully receive a DICOM study"",""given"":""the DICOM Service is running"",""when"":""an external DICOM SCU sends a study via C-STORE"",""then"":""the service accepts the association, saves the files to a temporary location, and sends a success response to the SCU.""},{""scenario"":""Ingestion message is queued for processing"",""given"":""a DICOM study has been received and saved temporarily"",""when"":""the C-STORE operation completes"",""then"":""a message containing the study metadata and file paths is published to a persistent RabbitMQ queue.""},{""scenario"":""Message consumer persists the study"",""given"":""an ingestion message is in the queue"",""when"":""the background consumer processes the message"",""then"":""the study's metadata is written to the PostgreSQL database and the DICOM files are moved to their permanent, structured storage location.""}]","[""WI-025"",""WI-026"",""WI-027"",""WI-031""]","[""DICOM SCP listener is implemented as a hosted service."",""Integration with RabbitMQ for decoupling is complete."",""The message consumer correctly persists metadata and moves files transactionally."",""Integration test with a DICOM toolkit (e.g., dcmtk) demonstrates successful end-to-end ingestion.""]"
"US-009","DICOM Services & Processing","Query and Retrieve Studies from a Remote PACS","Technician","As a Technician, I want to query a configured remote PACS and retrieve selected studies to my local system so that I can view, print, or perform other operations on them.","Enables interoperability with existing hospital infrastructure (PACS), allowing users to pull in necessary studies on-demand, which is a critical clinical workflow.","Should Have","8","[""US-008"",""US-014""]","[{""scenario"":""User successfully queries a PACS"",""given"":""a remote PACS is configured and reachable"",""when"":""a user enters search criteria (e.g., Patient ID) and executes the query"",""then"":""a list of matching studies from the PACS is displayed in the UI.""},{""scenario"":""User successfully retrieves a study"",""given"":""a list of query results is displayed"",""when"":""a user selects a study and initiates a C-MOVE retrieval"",""then"":""the remote PACS sends the study to the local system's C-STORE SCP, and the UI provides feedback on the operation's status.""},{""scenario"":""UI remains responsive during network operations"",""given"":""a query or retrieval is in progress"",""when"":""the system is communicating with the PACS"",""then"":""the application UI does not freeze and the user can perform other actions.""}]","[""WI-029"",""WI-030""]","[""PACS Query UI and ViewModel are complete."",""The fo-dicom SCU service for C-FIND and C-MOVE is implemented."",""The UI remains responsive by using async/await for all network calls."",""Integration test with a test PACS (e.g., Orthanc) validates the full query and retrieve workflow.""]"
"US-010","Database and Persistence","Ensure Data Security with Encryption","Security Officer","As a Security Officer, I want all network connections to the database to be encrypted via TLS and all columns containing PHI to be encrypted at rest so that the system complies with HIPAA security rules and protects sensitive patient data.","Provides essential data-at-rest and data-in-transit protection for PHI, which is a non-negotiable requirement for HIPAA compliance and mitigating data breach risks.","Must Have","8","[""US-000""]","[{""scenario"":""Database connection is encrypted"",""given"":""the application is configured to connect to the PostgreSQL database"",""when"":""the application establishes a connection"",""then"":""the connection must be made over TLS, and non-TLS connections must be rejected.""},{""scenario"":""PHI data is encrypted in the database"",""given"":""the application is saving a new patient record"",""when"":""the record is committed to the database"",""then"":""querying the 'patientName' column directly in the database shows encrypted gibberish.""},{""scenario"":""Application transparently decrypts PHI"",""given"":""a patient record with encrypted PHI exists"",""when"":""the application reads the record via Entity Framework Core"",""then"":""the patient's name is correctly displayed in the application UI, fully decrypted.""}]","[""WI-013"",""WI-014"",""WI-015"",""WI-016""]","[""EF Core DbContext is configured to require TLS for all connections."",""Sensitive credentials are confirmed to be stored in Windows Credential Manager."",""EF Core is configured to use pgcrypto for specified PHI columns."",""Integration tests verify that data is correctly encrypted on write and decrypted on read.""]"
"US-011","DICOM Viewer","View and Manipulate DICOM Images","Technician","As a Technician, I want to open and view DICOM studies in a high-performance, GPU-accelerated viewer with interactive tools like window/level, zoom, and pan so that I can perform efficient diagnostic image review.","Provides the primary clinical tool for users to view and interact with medical images, which is a core function of the application. High performance is critical for user adoption and workflow efficiency.","Must Have","21","[""US-008""]","[{""scenario"":""Viewing a DICOM image"",""given"":""a study is loaded into the viewer"",""when"":""an image is displayed"",""then"":""the image is rendered correctly, and the UI remains responsive.""},{""scenario"":""Interactive Window/Level Adjustment"",""given"":""a monochrome image is displayed"",""when"":""the user activates the WW/WL tool and drags the mouse"",""then"":""the image's brightness and contrast update smoothly in real-time.""},{""scenario"":""Interactive Zoom and Pan"",""given"":""an image is displayed"",""when"":""the user uses the mouse wheel or drags with the mouse"",""then"":""the image zooms in/out and pans smoothly.""},{""scenario"":""Progressive loading for large series"",""given"":""a large multi-frame study is being opened"",""when"":""the viewer loads the data"",""then"":""a low-resolution preview is shown almost instantly, which then sharpens as the full-resolution data loads in the background.""}]","[""WI-035"",""WI-036"",""WI-037"",""WI-038"",""WI-040""]","[""DirectX rendering pipeline is integrated into a WPF control."",""GPU-based shaders for WW/WL are implemented and functional."",""Core image manipulation tools (Zoom, Pan, WW/WL, Flip, Rotate) are working correctly."",""Performance targets for image loading and interaction are met on recommended hardware.""]"
"US-012","Printing, PDF, and Email","Prepare and Submit a Print Job Asynchronously","Technician","As a Technician, I want to prepare a print job with custom layouts and submit it for asynchronous processing so that the application remains responsive and I can continue my work while the printing occurs in the background.","Provides a robust and user-friendly printing workflow, a key requirement for sharing medical images. Asynchronous processing ensures a smooth user experience without UI freezes.","Should Have","13","[""US-011""]","[{""scenario"":""User configures a print layout"",""given"":""the user is in the print preview screen"",""when"":""they select a layout template (e.g., '2x2 grid'), change the orientation, and drag-and-drop images"",""then"":""the preview updates in real-time to reflect their changes.""},{""scenario"":""User submits a print job"",""given"":""the print layout is configured"",""when"":""the user clicks the 'Print' button"",""then"":""a command is sent to a RabbitMQ queue, a 'Queued' job appears in the print queue UI, and a non-blocking notification is shown.""},{""scenario"":""Background service processes the print job"",""given"":""a print job is in the queue"",""when"":""the background Windows Service consumes the message"",""then"":""the job is sent to the selected Windows printer and the job status in the print queue UI updates to 'Completed'.""},{""scenario"":""Print button is disabled if service is down"",""given"":""the background Windows Service is not running"",""when"":""the user enters the print preview screen"",""then"":""a synchronous status check fails, and the 'Print' button is disabled with a notification that the service is unavailable.""}]","[""WI-044"",""WI-045"",""WI-046"",""WI-047"",""WI-048"",""WI-023"",""WI-024""]","[""Interactive print preview UI is complete."",""The asynchronous job submission workflow using Named Pipes and RabbitMQ is functional."",""The background print job consumer correctly generates and spools print jobs."",""The Print Queue UI accurately reflects job status.""]"
"US-013","System Administration","View and Export System Audit Trail","Administrator","As an Administrator, I want to view, filter, and export a comprehensive audit trail of all significant system events so that I can perform security investigations and comply with HIPAA regulations.","Provides essential security and compliance capabilities, enabling traceability of all actions involving PHI and user accounts, which is mandatory under HIPAA.","Must Have","8","[""US-000""]","[{""scenario"":""Administrator views the audit trail"",""given"":""several auditable events have occurred (e.g., user login, password reset)"",""when"":""an Admin navigates to the 'Audit Trail' viewer"",""then"":""a list of all audit log entries is displayed in a human-readable format.""},{""scenario"":""Administrator filters the audit trail"",""given"":""the audit trail is being viewed"",""when"":""the Admin filters the logs by a specific user and date range"",""then"":""the list updates to show only the log entries that match the filter criteria.""},{""scenario"":""Administrator exports the audit trail"",""given"":""a filtered or unfiltered view of the audit trail is displayed"",""when"":""the Admin clicks the 'Export to CSV' button"",""then"":""a CSV file is generated containing the currently displayed audit log entries.""}]","[""WI-059"",""WI-060"",""WI-061""]","[""AuditLog database schema is in place."",""Centralized AuditService is implemented and integrated into all required workflows (user management, DICOM edits, etc.)."",""The Audit Trail viewer UI is functional with working filters and CSV export."",""The entire feature is accessible only to users with the 'Administrator' role.""]"
"US-014","System Administration","Configure and Verify PACS Connections","Administrator","As an Administrator, I want to add, edit, remove, and verify connections to remote DICOM PACS systems so that I can configure the application to interoperate with our existing imaging infrastructure.","Enables the critical workflow of querying and retrieving studies from external systems. Proper configuration tools are essential for system setup and maintenance.","Should Have","5","[""US-009""]","[{""scenario"":""Admin adds a new PACS configuration"",""given"":""the Admin is on the PACS configuration page"",""when"":""they enter the AE Title, IP Address, and Port for a new PACS and click 'Save'"",""then"":""the new configuration is saved to the database and appears in the list.""},{""scenario"":""Admin verifies a PACS connection"",""given"":""a PACS is configured in the list"",""when"":""the Admin clicks the 'Verify' button for that configuration"",""then"":""the system performs a DICOM C-ECHO verification and displays a 'Success' or 'Failure' status to the Admin.""},{""scenario"":""Admin removes a PACS configuration"",""given"":""an existing PACS configuration is no longer needed"",""when"":""the Admin deletes the configuration"",""then"":""it is removed from the system.""}]","[""WI-064""]","[""PACS Configuration UI for CRUD operations is complete."",""Configuration data is correctly persisted to the database."",""The C-ECHO verification feature is functional and provides accurate feedback."",""The feature is restricted to Administrator users.""]"
"US-015","Deployment & External Integration","Install and Configure the Application","System Administrator","As a System Administrator, I want a single MSIX installer that installs the application and its background service, and then guides me through a first-run wizard to validate and configure prerequisites so that I can deploy the system reliably.","Simplifies and de-risks the deployment process, ensuring that the application is installed and configured correctly before use, which is critical for system stability.","Should Have","8","[]","[{""scenario"":""Successful Installation"",""given"":""a target Windows machine"",""when"":""the administrator runs the MSIX installer"",""then"":""the WPF application is installed, and the 'DICOM Service' Windows Service is installed and started.""},{""scenario"":""First-Run Configuration Wizard"",""given"":""the application is launched for the first time"",""when"":""the configuration wizard is displayed"",""then"":""the administrator must enter and validate connection details for PostgreSQL and RabbitMQ before proceeding.""},{""scenario"":""Prerequisite Check Failure"",""given"":""the administrator enters incorrect database credentials in the wizard"",""when"":""they try to proceed"",""then"":""a connection error is displayed, and the application does not complete setup until a valid connection is established.""}]","[""WI-068"",""WI-069""]","[""MSIX packaging project is correctly configured to bundle the client and service."",""The installer correctly registers and starts the Windows Service."",""The first-run configuration wizard reliably validates prerequisites."",""The main application is inaccessible until the first-run configuration is completed successfully.""]"
"US-016","Deployment & External Integration","Validate Application License on Startup","System","As a System, I want to validate my license with the Odoo API on startup and gracefully handle failures so that the software operates in the correct mode (licensed, grace period, or read-only) according to the business agreement.","Enforces the commercial licensing model of the software while providing a resilient user experience through a grace period for network or API issues.","Should Have","5","[""US-001""]","[{""scenario"":""Successful License Validation"",""given"":""the system has a valid license key and can reach the Odoo API"",""when"":""the application starts up"",""then"":""the license is validated successfully and the application runs in full-featured mode.""},{""scenario"":""Invalid License"",""given"":""the Odoo API returns an 'invalid' status for the license key"",""when"":""the application starts up"",""then"":""the application enters a restricted, read-only mode where printing and exporting are disabled.""},{""scenario"":""API Unreachable - Grace Period"",""given"":""the Odoo API cannot be reached due to a network error"",""when"":""the application starts up"",""then"":""the application enters a fully functional 72-hour grace period.""},{""scenario"":""Grace Period Expires"",""given"":""the application is in a grace period that started more than 72 hours ago"",""when"":""the application starts up and still cannot reach the API"",""then"":""the grace period expires and the application enters the restricted, read-only mode.""}]","[""WI-070"",""WI-071""]","[""A resilient Odoo API client is implemented."",""The application startup logic correctly implements the state machine for license status (Licensed, GracePeriod, ReadOnly)."",""The authorization service is integrated with the license service to enforce read-only mode restrictions."",""Integration tests with a mock API validate all licensing scenarios.""]"