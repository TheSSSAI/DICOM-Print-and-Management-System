story_id,epic,title,user_role,description,priority,story_points,dependencies,acceptance_criteria_1,acceptance_criteria_2,acceptance_criteria_3,technical_tasks,definition_of_done
"US-001","Core Architecture & Technology Foundation","Establish Core Solution Structure and DI","Developer","As a Developer, I want a well-defined, multi-project solution based on Clean Architecture with Dependency Injection configured, so that I can build features in a maintainable, scalable, and testable manner.","Must Have",5,"","Given the solution is created with the standard project layers (Domain, Application, Infrastructure, Presentation)
When I build the solution
Then the build succeeds without any errors and project references are correctly configured.","Given the DI container is configured in the WPF client
When the application starts
Then I can resolve a registered service from the container in the main window's code-behind or ViewModel.","Given the DI container is configured in the Windows Service
When the service starts
Then a registered IHostedService can successfully resolve its dependencies from the container.","WI-001, WI-002","Solution and all project files are created and target .NET 8. Dependency Injection is configured for both WPF Client and Windows Service. The solution builds successfully. Project references are correctly configured between layers."
"US-002","Core Architecture & Technology Foundation","Configure Asynchronous and Synchronous IPC","Developer","As a Developer, I want abstract, reliable, and configured messaging (RabbitMQ) and IPC (Named Pipes) services, so that I can implement decoupled communication between the client and service for asynchronous tasks and synchronous status checks.","Must Have",8,"US-001","Given the RabbitMQ infrastructure code is in place
When the Windows Service starts
Then it correctly declares all required exchanges, durable queues, and the Dead-Letter Exchange/Queue topology on the RabbitMQ broker.","Given the Named Pipes server is running in the Windows Service
When the WPF client application calls the status check method
Then it successfully connects to the pipe, sends a 'PING' message, and receives a 'PONG' response.","Given the RabbitMQ publisher is used to send a persistent message to a durable queue
When the RabbitMQ broker is restarted
Then the message is not lost and is delivered to a consumer after the broker is back online.","WI-003, WI-004","Generic IMessagePublisher and consumer base class for RabbitMQ are implemented. Named Pipe server (service) and client (WPF) are implemented. All required RabbitMQ topology (durable queues, persistent messages, DLX) is configured. Communication channels are robust and handle connection failures."
"US-003","Core Architecture & Technology Foundation","Establish Database Persistence and Secure Logging","Administrator","As an Administrator, I want the system to have a secure, structured logging mechanism that redacts sensitive patient data (PHI) and a robust database layer, so that I can monitor system activity for troubleshooting and security audits while ensuring compliance with HIPAA.","Must Have",8,"US-001","Given Serilog is configured with the PHI redaction enricher
When an object containing a property like 'PatientName' is logged
Then the output log entry (in both the file and Windows Event Log) shows '[REDACTED]' instead of the actual patient's name.","Given the Entity Framework Core context is configured for PostgreSQL
When I run the 'dotnet ef migrations add' command
Then a new migration is successfully created based on the defined User and Role entities.","Given a PostgreSQL database is available
When I run the 'dotnet ef database update' command
Then all migrations are successfully applied to the database, including enabling the 'pgcrypto' extension.","WI-005, WI-006","Entity Framework Core is configured with a DbContext for a PostgreSQL provider. A custom Serilog enricher is implemented to redact PHI from all log sinks. Logs are written to both a rolling file and the Windows Event Log. Correlation IDs are included in log entries."
"US-004","User Authentication & Authorization","Define User and Security Data Models","Developer","As a Developer, I want the core user, role, and password history entities defined in the data model and a secure password hashing service implemented, so that I have the foundational components to build the authentication and authorization features.","Must Have",5,"US-003","Given the User, Role, and PasswordHistory entities are defined in EF Core
When a new database migration is created
Then the generated SQL script correctly defines the tables and relationships, including a unique index on the User's username.","Given a plaintext password is provided to the password hashing service's HashPassword method
When the method returns
Then the result is a valid BCrypt hash string.","Given a plaintext password and a known BCrypt hash are provided to the VerifyPassword method
When the method returns
Then it returns 'true' if the password matches the hash, and 'false' otherwise.","WI-007, WI-008","User, Role, and PasswordHistory entities are defined and configured in EF Core. A new database migration is successfully applied. An IPasswordHasher service is implemented using BCrypt and registered in the DI container."
"US-005","User Authentication & Authorization","Log In to the Application","System User","As a System User, I want to securely log in to the application using my username and password, so that I can gain access to the system and use the features authorized for my role.","Must Have",5,"US-004, US-006","Given I have a valid and active user account
When I enter my correct username and password and click 'Login'
Then the login window closes and the main application window is displayed.","Given I have a valid user account
When I enter my correct username but an incorrect password
Then the system displays a generic error message 'Invalid username or password.' and the password field is cleared.","Given my user account has been disabled by an administrator
When I enter my correct username and password
Then the system displays an error message 'Your account has been disabled. Please contact an administrator.' and I am prevented from logging in.","WI-009, WI-010","The WPF LoginView and LoginViewModel are created. An AuthenticationService orchestrates the login process using the user repository and password hasher. Successful login establishes a user session with role information. Failed logins provide generic, secure feedback."
"US-006","User Authentication & Authorization","Access Features Based on Assigned Role","System User","As a System User, I want the application's features and UI controls to be enabled or disabled based on my assigned role, so that I can only perform actions I am authorized for, ensuring system security.","Must Have",8,"US-005","Given I am logged in as a user with the 'Technician' role
When I navigate the application
Then the 'Administration' main menu item or tab is not visible.","Given I am logged in as a 'Technician' and am viewing a study's metadata
When I look for an option to edit the data
Then the 'Edit DICOM Metadata' button is hidden or disabled.","Given I am logged in as a user with the 'Administrator' role
When I navigate the application
Then all features, including the 'Administration' area and the 'Edit DICOM Metadata' button, are visible and enabled.","WI-011","A centralized authorization service is implemented to check the current user's role and permissions. ViewModels use this service to control the visibility and enabled state of UI elements. Backend application services also use this service to protect business logic from unauthorized access."
"US-007","User Authentication & Authorization","Automatic Session Lock After Inactivity","System User","As a System User, I want the application to automatically lock itself after a period of inactivity, so that sensitive Protected Health Information (PHI) is protected from unauthorized viewing on an unattended workstation.","Must Have",8,"US-005","Given I am logged into the application and the inactivity timeout is set to 15 minutes
When I perform no keyboard or mouse actions for 15 minutes
Then a modal lock screen overlay is displayed, obscuring the entire application window.","Given the application is running and I am active
When I move the mouse or press a key
Then the 15-minute inactivity timer is reset.","Given the session has been locked
When I look at the screen
Then the underlying application state, including any open studies, is preserved but is not visible or interactive.","WI-012","A service is created to monitor global user inactivity using low-level Windows hooks. After 15 minutes of inactivity, a lock screen view is displayed as a modal overlay. The inactivity timer is reset upon any detected user input."
"US-008","User Authentication & Authorization","Unlock a Locked Session with Password","System User","As a logged-in user whose session has been locked, I want to enter my password to securely unlock my session, so that I can immediately resume my work from where I left off.","Must Have",5,"US-007","Given the application session is locked
When I enter my correct password and click 'Unlock'
Then the lock screen overlay is removed and I can resume interaction with the application in its previous state.","Given the application session is locked
When I enter an incorrect password
Then an error message 'Invalid password. Please try again.' is displayed, and the session remains locked.","Given the application session is locked and I have made 4 consecutive incorrect password attempts
When I enter an incorrect password for the 5th time
Then my session is terminated and I am returned to the main login screen.","WI-013","The LockScreenViewModel is implemented to accept a password and verify it. After 5 failed attempts, the user is logged out. Successful unlocking dismisses the lock screen. All unlock attempts (successful and failed) are logged to the audit trail."
"US-009","System Administration & Configuration","Create a New User Account","Administrator","As an Administrator, I want to create a new user account with a username, temporary password, and role, so that I can provision access for new staff.","Must Have",5,"US-013, US-014","Given I am an Admin on the 'User Management' page
When I click 'Add User', enter a unique username, select the 'Technician' role, and click 'Create'
Then a success notification is displayed containing a secure temporary password, and the new user appears in the user list.","Given a user with the username 'jdoe' already exists
When I attempt to create a new user with the username 'jdoe'
Then the system prevents the creation and displays an error message stating 'Username already exists'.","Given I have successfully created a new user
When I view the audit trail
Then I see a new log entry with the event type 'User Created', showing my user ID as the actor and the new user's username as the target.","WI-015","The backend logic for creating a user is implemented. This includes validating for unique usernames, generating a secure temporary password, hashing it, setting the 'force password change' flag, and saving the user and an audit log entry in a single transaction."
"US-010","System Administration & Configuration","Reset a User's Password","Administrator","As an Administrator, I want to reset a user's password and generate a temporary one, so that I can quickly restore their access if they have forgotten their credentials.","Must Have",3,"US-013, US-014","Given I am an Admin on the 'User Management' page
When I select a user, click 'Reset Password', and confirm the action
Then a dialog is displayed containing a new, system-generated temporary password for the user.","Given a user's password has been reset
When the user's record is checked in the database
Then the password hash has been updated and the 'force password change on next login' flag is set to true.","Given I am viewing the user list
When I locate my own user account
Then the 'Reset Password' button for my own account is disabled.","WI-016","The backend logic for resetting a password is implemented. It generates a new temporary password, updates the user's record with the new hash and the 'force password change' flag, and logs the event to the audit trail. The UI prevents an admin from resetting their own password."
"US-011","System Administration & Configuration","Forced Password Change After Admin Reset","System User","As a system user whose password has been reset, I want to be forced to create a new password upon my next login, so that my account is immediately secured and only I know the credentials.","Must Have",8,"US-010","Given my password has been reset by an admin and I have a temporary password
When I successfully log in using the temporary password
Then I am immediately presented with a non-dismissible 'Create New Password' screen.","Given I am on the 'Create New Password' screen
When I try to close the window or navigate elsewhere
Then the action is prevented and I remain on the password change screen.","Given I am on the 'Create New Password' screen
When I enter a new password that meets the password policy and click 'Set Password'
Then my password is updated, the flag is cleared, and I am redirected to the main application window.","WI-017","The authentication service logic is modified to check for the 'force password change' flag. A dedicated view and ViewModel are created for the forced password change workflow, which validates the new password against the system's policy before completing the login process."
"US-012","System Administration & Configuration","View and Export System Audit Trail","Administrator","As an Administrator, I want to view a comprehensive audit trail of all significant system events and export it, so that I can perform security reviews, investigate incidents, and ensure compliance.","Must Have",5,"US-013","Given I am logged in as an Administrator
When I navigate to the 'Audit Trail' section in the Administration area
Then I can see a list of all audit log entries in a readable format.","Given I am viewing the audit trail
When I use the filter controls to select a specific user and a date range
Then the list of audit entries updates to show only the records matching my filter criteria.","Given I have filtered the audit trail view
When I click the 'Export to CSV' button
Then a CSV file is generated and downloaded, containing only the currently displayed (filtered) log data.","WI-020","An Audit Trail view and ViewModel are created for Administrators. The UI provides filtering by user and date range. An 'Export to CSV' function is implemented to export the filtered view. Data is loaded with pagination to handle large datasets efficiently."
"US-013","System Administration & Configuration","Implement Core Auditing System","Administrator","As an Administrator, I want the system to automatically log all significant events to a secure, persistent audit trail, so that a complete history of actions is available for security and compliance purposes.","Must Have",5,"US-004","Given a user is created or their password is reset by an admin
When the operation completes successfully
Then a corresponding record is written to the AuditLog table in the database.","Given the AuditLog entity is defined with a JSONB column for details
When an event is logged with structured data (e.g., old and new values)
Then this data is correctly serialized into the JSONB column in the database.","Given an application service needs to log an audit event
When it calls the central IAuditLoggerService
Then a new record is created in the AuditLog table as part of the same transaction as the primary operation.","WI-018, WI-019","The AuditLog entity is created and configured in EF Core, using a JSONB column for flexible data storage. A centralized, injectable IAuditLoggerService is created to provide a consistent way for application services to write to the audit trail atomically."
"US-014","System Administration & Configuration","Monitor System Health via a Dashboard","Administrator","As an Administrator, I want to view a real-time System Health Dashboard, so that I can quickly assess the operational status of all critical application components and proactively identify issues.","Must Have",8,"US-002, US-006","Given I am logged in as an Administrator
When I navigate to the 'System Health' dashboard
Then I can see status indicators for the Windows Service, PostgreSQL connectivity, and RabbitMQ connectivity.","Given the dashboard is open
When the available disk space at the DICOM storage location drops below a configured warning threshold
Then the disk space indicator changes color to yellow or red.","Given the dashboard is open
When a message fails processing and is sent to the Dead-Letter Queue (DLQ)
Then the 'DLQ Message Count' indicator updates to show '1' and is highlighted as a critical alert.","WI-021","A System Health dashboard view and ViewModel are created for Admins. A new IPC endpoint is added to the Windows Service for the client to query real-time health data (service status, queue depths, disk space). The UI displays these metrics and updates periodically."
"US-015","System Administration & Configuration","Manage User Roles and Status","Administrator","As an Administrator, I want to edit a user's role and status (enabled/disabled), so that I can manage their permissions and access rights as their job responsibilities change.","Must Have",5,"US-013","Given I am an Admin on the 'User Management' page
When I select a user, open the edit dialog, change their role from 'Technician' to 'Administrator', and save
Then the user's role is updated in the UI and an audit trail entry is created for the change.","Given I select an active user and change their status to 'Disabled'
When that user attempts to log in
Then their login is rejected with a message indicating their account is disabled.","Given there is only one active Administrator account left in the system
When I attempt to change that user's role to 'Technician' or disable their account
Then the system prevents the action and displays an error 'Cannot delete or disable the last administrator account.'","WI-014","The User Management UI is created, providing a list of users with Add/Edit/Delete controls accessible only to Admins. Backend logic for editing a user's role/status is implemented, including business rule checks to prevent admin lockout and auditing of all changes."
"US-016","DICOM C-STORE SCP Functionality","Receive and Persist DICOM Studies Asynchronously","Technician","As a Technician, I want studies sent from our modalities (e.g., CT, X-Ray) to be automatically received and reliably stored by the system, so that they are available for viewing without manual intervention.","Must Have",13,"US-002, US-003","Given the Windows Service is running
When an external modality sends a DICOM study via C-STORE
Then the service accepts the association, receives all DICOM files, and sends a success response back to the modality.","Given a study has been received by the SCP listener
When I check the RabbitMQ queue
Then a new message containing the study metadata and temporary file paths has been published to the processing queue.","Given a message is consumed from the processing queue
When the operation completes
Then the study metadata is saved to the PostgreSQL database, the DICOM files are moved to permanent storage, and the message is acknowledged and removed from the queue.","WI-022, WI-023, WI-024","A DICOM C-STORE SCP listener is implemented in the Windows Service using fo-dicom. Upon receipt, the SCP publishes a message to RabbitMQ and sends an immediate success response. A separate consumer service reads from the queue, performs transactional database insertion, moves files, and acknowledges the message."
"US-017","DICOM C-STORE SCP Functionality","Configure Automatic Routing for Incoming Studies","Administrator","As an Administrator, I want to configure rules that automatically route incoming DICOM studies to specific storage folders based on their metadata, so that I can organize our data logically on the file system.","Should Have",5,"US-016","Given I am an Admin in the settings area
When I create a new routing rule where 'Modality equals CT' routes to 'D:\CT_Studies'
Then the rule is saved to the database.","Given a routing rule for CT studies exists
When a new CT study is received by the C-STORE SCP
Then after processing, its DICOM files are stored in the 'D:\CT_Studies' folder.","Given a study is received that does not match any configured rules
When it is processed
Then its files are stored in the system's default storage location.","WI-025","A UI for Admins to manage auto-routing rules is created. The DICOM persistence consumer is enhanced with a rules engine that evaluates incoming study metadata against the configured rules to determine the final file storage path. A default path is used if no rules match."
"US-018","DICOM Query/Retrieve SCU Functionality","Configure and Verify Remote PACS Connections","Administrator","As an Administrator, I want to configure and manage the connection details for our remote PACS servers and verify connectivity, so that users can query and retrieve studies from them.","Must Have",5,"US-006, US-020","Given I am an Admin in the settings area
When I add a new PACS configuration with AE Title, IP, and Port
Then the new PACS configuration is saved and appears in the list.","Given a PACS is configured in the list
When I click the 'Verify' button next to it
Then the system sends a DICOM C-ECHO request to the PACS and displays a success or failure message based on the response.","Given a PACS configuration is no longer needed
When I click the 'Delete' button and confirm
Then the configuration is removed from the system.","WI-026","A settings view is created for Admins to perform full CRUD operations on PACS configurations. A 'Verify' button triggers an asynchronous C-ECHO request to the selected PACS and displays the result to the user."
"US-019","DICOM Query/Retrieve SCU Functionality","Query and Retrieve Studies from a Remote PACS","Technician","As a Technician, I want to search for studies on a remote PACS using patient or study criteria and retrieve them to my local system, so that I can view or print them.","Must Have",13,"US-018","Given I am on the Query/Retrieve page
When I select a configured PACS, enter search criteria (e.g., Patient ID), and click 'Search'
Then the system performs a DICOM C-FIND query and displays the matching studies in a results list.","Given the search results are displayed
When I select one or more studies from the list and click 'Retrieve'
Then the system initiates a DICOM C-MOVE request to the remote PACS.","Given a C-MOVE retrieval is in progress
When the studies are being transferred
Then the UI provides real-time feedback on the operation's status (e.g., 'Retrieving 2 of 5 images...'), and a final success or failure message.","WI-027, WI-028","A wrapper service around fo-dicom's SCU client capabilities (C-ECHO, C-FIND, C-MOVE) is created. A Query/Retrieve UI is developed that allows users to select a PACS, enter search criteria, view results, and initiate a C-MOVE retrieval with real-time progress feedback."
"US-020","DICOM Viewer & Tools","View and Navigate DICOM Images with High Performance","Technician","As a Technician, I want to open and view DICOM studies in a high-performance, GPU-accelerated viewer, so that I can smoothly scroll through large multi-frame series and interact with images without lag.","Must Have",21,"","Given I open a DICOM study
When the viewer loads
Then the images are displayed clearly, and a thumbnail grid of all images in the series is shown for easy navigation.","Given I open a multi-frame CT or MRI series
When I scroll my mouse wheel or drag a slider
Then I can smoothly cycle through the individual frames of the series in real-time.","Given I have two related series open
When I activate the side-by-side comparison mode
Then both series are displayed next to each other, and I have an option to synchronize panning and zooming between them.","WI-029, WI-030, WI-031","A custom WPF control is built to host a DirectX rendering surface for GPU-accelerated performance. A rendering pipeline is implemented to convert DICOM pixel data to DirectX textures and apply WW/WL via a pixel shader. The main viewer UI is built to host this control and provide navigation/comparison features."
"US-021","DICOM Viewer & Tools","Manipulate DICOM Images","Technician","As a Technician, I want a standard set of image manipulation tools (Zoom, Pan, Rotate, Flip, Window/Level), so that I can adjust the image presentation to optimize my diagnostic review.","Must Have",5,"US-020","Given an image is open in the viewer
When I activate the Window/Level tool and drag my mouse
Then the image's brightness and contrast update interactively in real-time.","Given an image is open in the viewer
When I use my mouse wheel
Then the image zooms in and out smoothly from the cursor's position.","Given an image is open in the viewer
When I activate the Pan tool and drag my mouse
Then I can move the image around within the viewport. The toolbar also provides buttons to rotate and flip the image.","WI-032","The viewer ViewModel is implemented with logic to handle user input for zoom, pan, rotate, flip, and WW/WL tools. This logic updates transformation parameters that are passed to the DirectX rendering engine to update the view without re-processing pixel data."
"US-022","DICOM Viewer & Tools","Create and Save Annotations and Measurements","Technician","As a Technician, I want to draw non-destructive annotations and take measurements on DICOM images and save them, so that I can highlight findings and communicate them to others.","Should Have",21,"US-020","Given an image is displayed in the viewer
When I use the measurement tool to draw a line between two points
Then a line is drawn on the image overlay and a text label appears showing the length in real-world units (e.g., mm).","Given I have added several annotations (arrows, text, measurements) to a series
When I click the 'Save Annotations' button
Then a new DICOM Grayscale Softcopy Presentation State (GSPS) object is created and saved alongside the original series files.","Given I close and reopen a study that has saved annotations
When the images are loaded
Then the previously saved annotations are automatically loaded from the GSPS object and displayed on the correct images.","WI-033","Tools for drawing annotations (arrows, text) and measurements (length, angle) are added to the viewer. A service is created to generate and parse DICOM GSPS objects using fo-dicom to save and load these non-destructive overlays."
"US-023","Print & Export Functionality","Configure and Preview a Print Job","Technician","As a Technician, I want a print preview screen that allows me to arrange images on a page and configure layout options, so that I have full control over the final printed output.","Must Have",8,"US-002","Given I select images to print
When the Print Preview window opens
Then I see a live, WYSIWYG preview of the printed page.","Given I am in the Print Preview window
When I select a new page layout from a list (e.g., '2x2 grid on A4')
Then the preview immediately updates to show my images arranged in the new layout.","Given I am arranging images in a grid layout
When I drag an image from one cell and drop it onto another
Then the two images swap positions in the preview.","WI-036","A comprehensive Print Preview view and ViewModel are created. It provides a live preview of the page and allows users to select layouts, configure page options, and rearrange images via drag-and-drop. The 'Print' button checks the background service status via Named Pipes before enabling."
"US-024","Print & Export Functionality","Brand and Anonymize Print Output","Technician","As a Technician, I want to add branding (logos, custom text) and apply de-identification masks to my print jobs, so that the output is professional and compliant with privacy requirements.","Should Have",8,"US-023","Given I am in the Print Preview window
When I upload our clinic's logo (PNG file)
Then the logo appears in the header of the print preview page.","Given I add a custom text field with the content 'Patient Name: [PatientName]'
When the job is printed
Then '[PatientName]' is dynamically replaced with the actual patient's name from the DICOM metadata.","Given I am preparing a study for a presentation
When I use the de-identification tool to draw a blackout rectangle over the patient's name in the preview
Then this mask is applied to the final printed output, but the original DICOM file remains unchanged.","WI-037","The Print Preview UI is extended to allow uploading a logo and adding custom text fields with dynamic DICOM variable replacement. A feature is added to allow users to draw non-destructive blackout overlays on the preview, which are then rendered on the final output."
"US-025","Print & Export Functionality","Submit and Process Print/PDF Jobs Asynchronously","Technician","As a Technician, I want to submit print and PDF export jobs to a background queue for processing, so that the application remains responsive and I can continue working while these long-running tasks complete.","Must Have",13,"US-023","Given I have configured a layout in the Print Preview window
When I click the 'Print' button
Then a print job is submitted to a RabbitMQ queue, and I immediately see a 'Print job queued' notification, allowing me to close the preview and continue working.","Given a print job has been submitted to the queue
When the background Windows Service processes the job
Then it renders the document using the Windows Print API and spools it to the selected printer.","Given I submit a job to be exported as a PDF
When the background service processes the job
Then it uses the QuestPDF library to generate a PDF/A-3 compliant file, optionally encrypting it, and saves it to my specified location.","WI-034, WI-035","RabbitMQ consumers are created in the Windows Service to handle print and PDF generation jobs. The client application serializes the complete job configuration and publishes it to the appropriate queue. The consumers perform the heavy lifting of document generation and spooling/saving."
"US-026","Print & Export Functionality","Send Study Output via Email","Technician","As a Technician, I want to send the print output of a study via email directly from the application, so that I can easily share it with referring physicians or other stakeholders.","Could Have",5,"US-023","Given an Administrator has configured the SMTP server settings
When I choose the 'Send via Email' option from the Print Preview
Then a dialog appears allowing me to compose an email (To, Subject, Body).","Given I am composing an email
When I choose to attach the output as an encrypted PDF
Then the generated PDF is password-protected and attached to the email before sending.","Given I am sending an email containing PHI in the subject or an unencrypted attachment
When I click 'Send'
Then a modal warning dialog appears, informing me of the risk of sending unsecured PHI and requiring my explicit confirmation to proceed.","WI-038","An Admin UI for SMTP configuration is created. An email composition dialog is developed, allowing users to attach the print output as either a PDF or image files. The feature uses MailKit for sending and includes a mandatory security warning for sending unsecured PHI."
"US-027","Deployment & Installation","Install the Application and Background Service","System Administrator (Installer)","As a System Administrator, I want a single, digitally signed MSIX installer that installs both the client application and the background Windows Service, so that I can deploy the application easily and securely.","Must Have",8,"","Given I have the signed MSIX installer file
When I run it on a clean Windows machine
Then the installation process completes successfully without requiring developer mode.","Given the installation is complete
When I check the Windows Services console
Then a service named 'DICOM Service' is listed, and its status is 'Running'.","Given I uninstall the application through the Windows 'Apps & features' settings
When the uninstallation completes
Then both the client application files and the 'DICOM Service' are completely removed from the system.","WI-039, WI-041, WI-042","A Windows Application Packaging Project is added to the solution to create an MSIX installer. The package manifest is configured to include both client and service executables and to register the service using the `windows.service` extension. The build process is configured to sign the final package with a valid code signing certificate."
"US-028","Deployment & Installation","Verify Prerequisites During Installation","System Administrator (Installer)","As a System Administrator, I want the installer to verify connectivity to the required external services (PostgreSQL, RabbitMQ) before completing, so that I can ensure the application is installed into a correctly configured environment.","Should Have",8,"US-027","Given I am running the installer (or the application on first run)
When I am prompted for and enter the PostgreSQL connection details
Then the installer tests the connection and verifies that the `pgcrypto` extension is enabled.","Given I enter incorrect RabbitMQ connection details
When the installer tests the connection
Then it fails and displays an error message, preventing the installation from proceeding until valid details are provided.","Given all prerequisite checks for PostgreSQL and RabbitMQ pass
When I proceed with the installation
Then the installation completes successfully and saves the verified connection settings for the application to use.","WI-040","A prerequisite checking mechanism is implemented, either as a custom installer action or a first-run configuration wizard in the application. This checker prompts for connection details, attempts to connect to PostgreSQL and RabbitMQ, and validates the `pgcrypto` extension, blocking setup completion on failure."