"story_id","epic","title","user_role","description","business_value","priority","story_points","dependencies","acceptance_criteria","technical_tasks","definition_of_done"
"US-001","User Authentication & Authorization","Log in to the Application with Role-Specific Access","Registered System User (Technician or Administrator)","As a Registered System User, I want to securely log in to the application using my unique username and password so that I can gain access to the system and use the features and functions authorized for my specific role.","Ensures that only authorized personnel can access sensitive Protected Health Information (PHI), thereby enforcing security, meeting HIPAA compliance requirements, and enabling the role-based access control model which is fundamental to the system's operation.","Must Have","8","[""US-006""]","[{""scenario"":""Successful login as Administrator"",""given"":""I have a valid and active 'Administrator' account"",""when"":""I enter my correct username and password and click 'Login'"",""then"":""the login window closes and the main application window is displayed with all features, including the 'Administration' area, visible and enabled.""},{""scenario"":""Successful login as Technician"",""given"":""I have a valid and active 'Technician' account"",""when"":""I enter my correct username and password and click 'Login'"",""then"":""the login window closes and the main application window is displayed with the 'Administration' area hidden or disabled.""},{""scenario"":""Login attempt with an incorrect password"",""given"":""I have a valid username"",""when"":""I enter an incorrect password and click 'Login'"",""then"":""a generic error message 'Invalid username or password.' is displayed, and I remain on the login screen.""},{""scenario"":""Login attempt with a disabled account"",""given"":""my user account has been disabled by an administrator"",""when"":""I enter my correct username and password and click 'Login'"",""then"":""an error message 'Your account has been disabled. Please contact an administrator.' is displayed.""}]","[""WI-011"",""WI-012"",""WI-013""]","[""User can successfully log in with both Admin and Technician roles."",""Role-based UI visibility is correctly applied after login."",""All failed login scenarios are handled gracefully with appropriate error messages."",""Unit and integration tests for the AuthenticationService are implemented and passing."",""Passwords are confirmed to be verified using the BCrypt hashing service.""]"
"US-003","User Authentication & Authorization","Automatically Lock Session After Inactivity","Authenticated User","As a clinician or administrator, I want the application to automatically lock itself after a defined period of inactivity, so that sensitive Protected Health Information (PHI) is protected from unauthorized viewing on an unattended workstation.","Enhances security and ensures HIPAA compliance by automatically securing sessions on unattended workstations, mitigating the risk of unauthorized PHI access.","Must Have","5","[""US-001""]","[{""scenario"":""Session locks after 15 minutes of inactivity"",""given"":""I am logged into the application"",""when"":""I perform no keyboard or mouse actions for 15 minutes"",""then"":""a modal lock screen overlay is displayed, obscuring the entire application window.""},{""scenario"":""Inactivity timer resets on user interaction"",""given"":""I am logged in and have been inactive for 14 minutes"",""when"":""I move the mouse or press a key"",""then"":""the inactivity timer is reset, and the session remains unlocked.""}]","[""WI-014""]","[""Application correctly displays the lock screen after 15 minutes of user inactivity."",""Any user input (mouse move, click, key press) successfully resets the inactivity timer."",""The activity monitoring mechanism has a negligible performance impact on the application.""]"
"US-004","User Authentication & Authorization","Unlock Session with Password","Authenticated User","As a logged-in user whose session has been locked, I want to enter my password into a lock screen to securely unlock my session and resume my work from where I left off.","Provides a seamless user experience that maintains workflow continuity after a session is locked for security, preventing loss of work.","Must Have","5","[""US-003""]","[{""scenario"":""Successful unlock with correct password"",""given"":""my application session is locked"",""when"":""I enter my correct password and click 'Unlock'"",""then"":""the lock screen is removed, and the application is restored to its exact pre-lock state.""},{""scenario"":""Unlock attempt with incorrect password"",""given"":""my application session is locked"",""when"":""I enter an incorrect password and click 'Unlock'"",""then"":""an error message 'Invalid password. Please try again.' is displayed, and the session remains locked.""},{""scenario"":""Session is terminated after multiple failed unlock attempts"",""given"":""my application session is locked and I have made 4 consecutive failed attempts"",""when"":""I enter an incorrect password for the 5th time"",""then"":""my session is terminated, and the application returns to the main login screen.""}]","[""WI-015""]","[""User can successfully unlock a locked session with the correct password."",""Incorrect password attempts are handled with an error message."",""The session is forcibly terminated after 5 failed attempts."",""All unlock attempts (successful and failed) are recorded in the audit trail.""]"
"US-005","User Authentication & Authorization","Force Password Change After Administrative Reset","System User","As a user whose password was reset by an administrator, I want to be forced to create a new, private password upon my next login, so that my account is immediately secured and only I know the credentials.","Enhances account security by ensuring temporary passwords are immediately replaced with a private password known only to the user, a critical control for HIPAA compliance.","Must Have","5","[""US-009"",""US-011""]","[{""scenario"":""User is forced to change password on first login after reset"",""given"":""my password has been reset by an admin and I have a temporary password"",""when"":""I log in using the temporary password"",""then"":""I am immediately presented with a non-dismissible 'Create New Password' screen.""},{""scenario"":""User successfully sets a new password"",""given"":""I am on the 'Create New Password' screen"",""when"":""I enter a new password that meets the system's password policy and click 'Set Password'"",""then"":""my password is updated, and I am redirected to the main application.""},{""scenario"":""User is prevented from bypassing the password change screen"",""given"":""I am on the 'Create New Password' screen"",""when"":""I attempt to close the screen or navigate elsewhere"",""then"":""the action is prevented, and I remain on the password change screen.""}]","[""WI-017""]","[""A user logging in with a temporary password is correctly redirected to the forced change screen."",""The new password must be validated against the configured password policy."",""Upon successful change, the 'isTemporaryPassword' flag is cleared in the database."",""The user cannot access any other part of the application until the password is changed.""]"
"US-006","System Administration & Monitoring","Create a New User Account","Administrator","As an Administrator, I want to create a new user account with a username, temporary password, and role, so I can provision system access for new staff members.","Enables secure and efficient onboarding of new personnel by provisioning system access with appropriate permissions.","Must Have","3","[""US-001"",""US-031""]","[{""scenario"":""Admin successfully creates a new Technician user"",""given"":""I am on the 'User Management' page"",""when"":""I click 'Add User', enter a unique username, select the 'Technician' role, and click 'Create'"",""then"":""a new user is created, a success notification is displayed containing a temporary password, and the new user appears in the user list.""},{""scenario"":""Attempt to create a user with a duplicate username"",""given"":""a user with the username 'jdoe' already exists"",""when"":""I attempt to create another user with the username 'jdoe'"",""then"":""the system prevents the creation and displays an error message 'Username already exists'.""}]","[""WI-061""]","[""A new user record is created in the database with a BCrypt hashed temporary password."",""The user record is flagged to require a password change on next login."",""The user creation event is successfully logged in the audit trail."",""The UI provides clear feedback to the administrator, including the temporary password.""]"
"US-010","Core Architecture & Setup","Establish Secure Inter-Process Communication (IPC)","System Architect","As a System Architect, I want to establish robust and distinct communication channels between the client and service, so that synchronous status checks are fast and asynchronous tasks are reliably offloaded.","Creates a responsive and resilient application by using the correct communication patterns for different tasks, preventing the UI from freezing during long operations and ensuring no tasks are lost.","Must Have","8","[]","[{""scenario"":""Client checks service status synchronously"",""given"":""the background Windows Service is running"",""when"":""the client application initiates a status check via Named Pipes"",""then"":""the client receives a successful 'PONG' response within 500ms.""},{""scenario"":""Client queues an asynchronous task"",""given"":""the background service and RabbitMQ broker are running"",""when"":""the client publishes a command message to a RabbitMQ queue"",""then"":""the message appears in the queue, and the background service consumer receives it for processing.""},{""scenario"":""Client handles unavailable service for status check"",""given"":""the background Windows Service is stopped"",""when"":""the client application initiates a status check via Named Pipes"",""then"":""the client call times out and correctly identifies the service as unavailable.""}]","[""WI-006"",""WI-007""]","[""RabbitMQ infrastructure for publishing and consuming messages is implemented and tested."",""Named Pipes client/server for synchronous 'PING'/'PONG' status checks is implemented and tested."",""The communication services are registered with DI and available throughout the application."",""Connection resilience logic for RabbitMQ is implemented.""]"
"US-011","User Authentication & Authorization","Configure System-Wide Password Policy","Administrator","As an Administrator, I want to configure the system-wide password policy, so that I can enforce security standards for all user accounts in compliance with organizational requirements.","Strengthens system security by enforcing strong password requirements, reducing the risk of unauthorized access through weak or compromised credentials.","Must Have","5","[""US-001""]","[{""scenario"":""Admin configures password policy"",""given"":""I am on the 'Password Policy' settings page"",""when"":""I set the minimum length to 14, require a symbol, and set password history to 10, then click 'Save'"",""then"":""the settings are persisted, and a success notification is shown.""},{""scenario"":""User is forced to comply with new policy"",""given"":""the password policy requires a symbol"",""when"":""a user attempts to change their password to one without a symbol"",""then"":""the change is rejected, and an error message 'Password must contain a symbol.' is displayed.""}]","[""WI-016""]","[""Admin UI for configuring password policy (length, complexity, history) is implemented."",""PasswordPolicyValidator service correctly validates passwords against all configured rules."",""The validator correctly checks against the PasswordHistory table to prevent reuse."",""Policy settings are persisted to and read from the database.""]"
"US-012","DICOM Network Services & Processing","Receive and Asynchronously Process DICOM Studies","System","As the System, I want to function as a DICOM C-STORE SCP, receiving studies and immediately queueing them for background processing, so that I can ingest data from modalities at high speed without getting bogged down by database writes.","Enables high-throughput data acquisition from medical imaging devices, ensuring the system can keep up during peak usage without losing data or failing associations.","Must Have","13","[""US-010""]","[{""scenario"":""System receives a DICOM study"",""given"":""the background service is running and listening as a C-STORE SCP"",""when"":""an external modality sends a DICOM study"",""then"":""the service accepts the study, sends a DICOM success response, and publishes a message to the ingestion queue on RabbitMQ.""},{""scenario"":""Background service processes a queued study"",""given"":""a message containing study metadata exists in the ingestion queue"",""when"":""the ingestion consumer processes the message"",""then"":""new records for the patient, study, series, and images are created in the database, the DICOM files are moved to permanent storage, and the message is removed from the queue.""},{""scenario"":""System handles a failing message"",""given"":""a message in the queue consistently causes a processing error"",""when"":""the consumer fails to process it after 3 retries"",""then"":""the message is automatically moved to the Dead-Letter Queue (DLQ) for manual inspection.""}]","[""WI-018"",""WI-019"",""WI-020"",""WI-021""]","[""C-STORE SCP listener is integrated into the Windows Service and functions correctly."",""The asynchronous pipeline (SCP -> RabbitMQ -> Consumer -> Database) is fully implemented."",""The Dead-Letter Queue mechanism is configured and tested."",""The entire process is non-blocking for the SCP listener.""]"
"US-013","DICOM Network Services & Processing","Query and Retrieve Studies from a Remote PACS","Technician or Administrator","As a Technician or Administrator, I want to query a remote PACS for studies and retrieve selected ones to my local system, so that I can import external patient data for viewing or printing.","Provides essential interoperability, allowing users to access and work with data from a central picture archiving and communication system (PACS).","Must Have","8","[""US-012""]","[{""scenario"":""User successfully queries a remote PACS"",""given"":""I am on the PACS Query screen and have a valid PACS configuration"",""when"":""I enter search criteria (e.g., Patient ID) and click 'Search'"",""then"":""the system performs a DICOM C-FIND and displays the matching study results in a list.""},{""scenario"":""User retrieves a study from the remote PACS"",""given"":""I have a list of search results from a remote PACS"",""when"":""I select a study and click 'Retrieve'"",""then"":""the system initiates a DICOM C-MOVE, the remote PACS sends the study to my local C-STORE SCP, and the study appears in my local study browser.""},{""scenario"":""Admin verifies PACS connectivity"",""given"":""I am an Admin on the PACS Configuration page"",""when"":""I click the 'Verify' button for a configured PACS"",""then"":""the system performs a DICOM C-ECHO and displays a 'Success' or 'Failure' message.""}]","[""WI-022"",""WI-023"",""WI-024"",""WI-025""]","[""The PACS Query UI is functional."",""The DICOM SCU service can successfully perform C-FIND, C-MOVE, and C-ECHO operations against a test PACS."",""The UI provides clear feedback on the status of the query and retrieve operations."",""All network operations are asynchronous and do not block the UI.""]"
"US-014","DICOM Viewer & Image Manipulation","View and Manipulate DICOM Images with High Performance","Technician or Administrator","As a Technician or Administrator, I want a high-performance DICOM viewer with standard manipulation tools, so that I can effectively review and diagnose medical images.","Provides the core clinical functionality of the application, enabling users to perform their primary task of reviewing medical images.","Must Have","21","[]","[{""scenario"":""User views a DICOM image"",""given"":""I have opened a study"",""when"":""I select an image series"",""then"":""the image is rendered on screen using GPU acceleration, and I can scroll through multi-frame series.""},{""scenario"":""User uses interactive window/level tool"",""given"":""an image is displayed in the viewer"",""when"":""I activate the window/level tool and drag my mouse"",""then"":""the image's brightness and contrast are updated in real-time on the GPU.""},{""scenario"":""User uses zoom and pan tools"",""given"":""an image is displayed in the viewer"",""when"":""I use my mouse wheel to zoom and right-click to pan"",""then"":""the image viewport updates smoothly and interactively.""},{""scenario"":""User opens a large study quickly"",""given"":""I have a large (500MB) CT study"",""when"":""I open the study"",""then"":""a low-resolution preview appears almost instantly (< 3 seconds), and the full-resolution data loads progressively in the background.""}]","[""WI-026"",""WI-027"",""WI-028"",""WI-029"",""WI-030"",""WI-031"",""WI-032""]","[""The DirectX-based rendering pipeline is implemented and integrated into a WPF control."",""The viewer can render both monochrome and color DICOM images."",""Zoom, Pan, and interactive Window/Level tools are fully functional and performant."",""The progressive loading strategy is implemented and meets performance targets.""]"
"US-015","DICOM Viewer & Image Manipulation","Create and Save Non-Destructive Annotations","Technician or Administrator","As a Technician or Administrator, I want to create non-destructive annotations and measurements on images and save them, so that I can record findings and collaborate with others without altering the original image data.","Enables clinical collaboration and documentation by allowing users to add interpretive information to images in a standardized, interoperable format (DICOM GSPS).","Should Have","13","[""US-014""]","[{""scenario"":""User creates a measurement annotation"",""given"":""I am viewing an image"",""when"":""I use the length tool to draw a line on a feature"",""then"":""the line is displayed on the image overlay, and a label shows the length in real-world units (e.g., '50.2 mm').""},{""scenario"":""User saves annotations"",""given"":""I have drawn several annotations on an image series"",""when"":""I click 'Save Annotations'"",""then"":""the system creates a new DICOM Grayscale Softcopy Presentation State (GSPS) object associated with the series, and the original image files are not modified.""},{""scenario"":""User reloads a study with saved annotations"",""given"":""a study has a saved GSPS object"",""when"":""I open the study"",""then"":""the saved annotations are automatically loaded from the GSPS object and displayed on the corresponding images.""}]","[""WI-034"",""WI-035""]","[""Annotation tools for drawing shapes, text, and measurements are implemented."",""Measurements are correctly calibrated using DICOM pixel spacing tags."",""The system can successfully create a valid DICOM GSPS object from the drawn annotations."",""The system can parse a GSPS object and display its annotations on the correct images.""]"
"US-016","Asynchronous Printing & Exporting","Submit and Monitor Asynchronous Print Jobs","Technician or Administrator","As a Technician or Administrator, I want to submit print jobs to a background queue and monitor their status, so that I can continue working in the application without waiting for the print job to complete.","Improves user productivity and application responsiveness by offloading slow printing tasks to a reliable background process.","Must Have","8","[""US-010""]","[{""scenario"":""User submits a print job"",""given"":""I am on the Print Preview screen and the background service is running"",""when"":""I click 'Print'"",""then"":""the print job is serialized and published as a persistent message to the print queue in RabbitMQ, and a toast notification 'Print job queued' is displayed.""},{""scenario"":""User monitors the print queue"",""given"":""I have submitted a print job"",""when"":""I navigate to the 'Print Queue' UI"",""then"":""I can see my job listed with a status of 'Queued', which later changes to 'Processing', and finally 'Completed' or 'Failed'.""},{""scenario"":""User attempts to print while service is down"",""given"":""the background Windows Service is not running"",""when"":""I navigate to the Print Preview screen"",""then"":""the 'Print' button is disabled, and a notification informs me the print service is unavailable.""}]","[""WI-045"",""WI-046"",""WI-047"",""WI-048"",""WI-049"",""WI-050"",""WI-051""]","[""The client correctly checks service status via Named Pipes before enabling the print button."",""Print jobs are successfully submitted to a durable, persistent RabbitMQ queue."",""The background service consumes, processes, and spools jobs to the Windows Print API."",""The PrintJob database table is correctly updated with the job's status throughout its lifecycle."",""The Print Queue UI accurately reflects the status of jobs in the database.""]"
"US-017","Security & Compliance","Securely Edit DICOM Metadata with a Full Audit Trail","Administrator","As an Administrator, I want to edit DICOM metadata in a secure, non-destructive way, so that I can correct data errors while maintaining data integrity and a complete, auditable change history.","Ensures data integrity and HIPAA compliance by preventing modification of original medical records and by creating an immutable audit trail of all changes to Protected Health Information (PHI).","Should Have","13","[""US-031""]","[{""scenario"":""Admin initiates a metadata edit session"",""given"":""I am an Administrator viewing a study's metadata"",""when"":""I click 'Edit Metadata'"",""then"":""the system creates a temporary 'working copy' of the study's files, and an audit event 'Working Copy Created' is logged.""},{""scenario"":""Admin saves a metadata change"",""given"":""I am in an edit session and have changed the Patient Name from 'John' to 'Jonathan'"",""when"":""I click 'Save'"",""then"":""the change is saved to the working copy file, and a detailed audit log is created showing the tag, old value ('John'), and new value ('Jonathan').""},{""scenario"":""System persists unsaved changes"",""given"":""I have an active edit session with unsaved changes"",""when"":""I close and reopen the application and navigate to the same study"",""then"":""I am prompted with a choice to 'Continue with unsaved changes' or 'Discard changes'.""}]","[""WI-078"",""WI-079"",""WI-080"",""WI-081""]","[""Metadata editing is restricted to Administrators."",""The 'working copy' workflow is implemented, ensuring original files are never modified."",""All metadata changes are logged to the audit trail with old and new values."",""The application correctly handles the persistence and recovery of unsaved working copies.""]"
"US-018","Licensing & External Integrations","Validate Application License on Startup","System","As the System, I want to validate my license with the Odoo API on startup, so that I can operate in the correct mode (Licensed, Grace Period, or Read-Only) based on my license status.","Enforces commercial licensing terms for the software, while providing a 72-hour grace period to ensure operational continuity during network outages.","Must Have","5","[]","[{""scenario"":""Successful license validation"",""given"":""I have a valid license key and network connectivity"",""when"":""the application starts"",""then"":""it successfully validates with the Odoo API and runs in fully functional mode.""},{""scenario"":""Validation fails due to network error"",""given"":""I have no network connectivity"",""when"":""the application starts"",""then"":""it enters a 72-hour grace period and remains fully functional.""},{""scenario"":""Grace period expires"",""given"":""I have been in a grace period for more than 72 hours without a successful validation"",""when"":""the application starts"",""then"":""it enters a restricted, read-only mode where functions like printing and exporting are disabled.""},{""scenario"":""API returns an invalid license status"",""given"":""I have network connectivity but my license key is invalid"",""when"":""the application starts"",""then"":""it immediately enters the restricted, read-only mode.""}]","[""WI-082"",""WI-083""]","[""An API client for the Odoo licensing service is implemented, enforcing TLS 1.2+."",""The application correctly implements the state machine logic for Licensed, GracePeriod, and ReadOnly modes."",""The grace period timer is correctly persisted between application sessions."",""UI controls are correctly disabled in Read-Only mode.""]"
"US-019","Deployment & Installation","Install the Application via a Signed MSIX Package","System Administrator","As a System Administrator, I want to install the application using a signed MSIX package, so that I can have a secure, reliable, and straightforward deployment experience that also handles the background service setup.","Provides a modern, secure, and reliable deployment method for the application, reducing installation-related support issues and ensuring system components are correctly configured.","Must Have","8","[]","[{""scenario"":""Admin installs the application"",""given"":""I have the signed MSIX installer package"",""when"":""I run the installer on a clean Windows machine"",""then"":""the WPF client application is installed, and the 'DICOM Service' is registered and started in Windows Services.""},{""scenario"":""Application performs first-run prerequisite check"",""given"":""I have just installed the application"",""when"":""I launch the WPF client for the first time"",""then"":""I am prompted to enter and validate connection details for PostgreSQL and RabbitMQ.""},{""scenario"":""First-run check fails"",""given"":""I am in the first-run setup wizard"",""when"":""I enter incorrect PostgreSQL credentials"",""then"":""an error message is displayed, and I am prevented from completing the setup until valid credentials are provided.""}]","[""WI-084"",""WI-085"",""WI-086"",""WI-087""]","[""The build pipeline is configured to produce a signed MSIX package."",""The MSIX manifest correctly declares the Windows Service for automatic registration and startup."",""The application's first-run logic correctly validates connectivity to PostgreSQL (including the pgcrypto extension) and RabbitMQ."",""The installer provides a clean and successful installation experience.""]"
"US-020","System Administration & Monitoring","Monitor System Health via a Dashboard","Administrator","As an Administrator, I want to view a real-time System Health Dashboard, so that I can quickly assess the operational status of all critical components and proactively identify issues.","Improves system reliability and reduces downtime by providing administrators with immediate visibility into the health of key dependencies, enabling faster troubleshooting.","Should Have","8","[""US-010""]","[{""scenario"":""Admin views the health dashboard with all systems online"",""given"":""I am an Administrator and all system components are running correctly"",""when"":""I navigate to the System Health Dashboard"",""then"":""I see green status indicators for the Windows Service, PostgreSQL, and RabbitMQ, and accurate metrics for queue depths and disk space.""},{""scenario"":""Dashboard reflects a component failure"",""given"":""the RabbitMQ service is stopped"",""when"":""I view the System Health Dashboard"",""then"":""the status indicator for RabbitMQ is red, and an alert may be visible.""},{""scenario"":""Dashboard shows messages in the dead-letter queue"",""given"":""there are 5 messages in the DLQ"",""when"":""I view the System Health Dashboard"",""then"":""the dashboard displays '5' next to the dead-letter queue metric.""}]","[""WI-068"",""WI-069""]","[""A background service in the Windows Service host periodically polls and caches the status of all required components."",""The Admin UI dashboard correctly retrieves and displays this cached health data."",""The dashboard UI updates in near real-time to reflect changes in system status."",""The data collection covers all metrics specified in REQ-1-091.""]"
"US-031","System Administration & Monitoring","View and Export Audit Trail","Administrator","As an Administrator, I want to view a comprehensive audit trail of all significant system events, so that I can investigate security incidents, monitor user activity, and ensure compliance.","Provides essential security and compliance capabilities, enabling accountability and forensic analysis of system activities as required by regulations like HIPAA.","Must Have","5","[]","[{""scenario"":""Admin views the audit trail"",""given"":""several auditable events (e.g., user login, metadata edit) have occurred"",""when"":""I navigate to the 'Audit Trail' viewer"",""then"":""I see a chronological list of all logged events in a human-readable format.""},{""scenario"":""Admin filters the audit trail"",""given"":""I am viewing the audit trail"",""when"":""I filter by a specific user and a date range"",""then"":""the list updates to show only the events performed by that user within that time period.""},{""scenario"":""Admin exports the audit trail"",""given"":""I have a filtered view of the audit trail"",""when"":""I click the 'Export to CSV' button"",""then"":""a CSV file is generated containing only the data from the currently displayed, filtered view.""}]","[""WI-066"",""WI-067""]","[""A centralized AuditTrailService is implemented for logging events to the database."",""The Audit Trail Viewer UI is implemented and restricted to Administrators."",""Filtering by user and date range functions correctly."",""The Export to CSV feature is implemented and works on the filtered dataset.""]"